"use strict";exports.__esModule=!0;var electron_1=require("electron"),main_1=require("../../main"),defaulttemplate=[{label:"File",submenu:[{label:"Save",accelerator:"CmdOrCtrl+S",click:function(){main_1.mainWindow.webContents.send("menu_action","file.save")}},{label:"Save as",accelerator:"CmdOrCtrl+Shift+S",click:function(){main_1.mainWindow.webContents.send("menu_action","file.save_as")}},{label:"New File",accelerator:"CmdOrCtrl+N",click:function(){main_1.mainWindow.webContents.send("menu_action","file.new")}},{label:"New Folder",accelerator:"CmdOrCtrl+Shift+N",click:function(){main_1.mainWindow.webContents.send("menu_action","file.new_folder")}},{label:"Exit",accelerator:"Alt+F4",click:function(){main_1.mainWindow.close()}}]},{label:"Edit",submenu:[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},{role:"pasteandmatchstyle"},{role:"delete"},{role:"selectall"}]},{label:"View",submenu:[{label:"Reload",accelerator:"CmdOrCtrl+R",click:function(e,t){t&&t.reload()}},{label:"Toggle Developer Tools",accelerator:"darwin"===process.platform?"Alt+Command+I":"Ctrl+Shift+I",click:function(e,t){t&&t.webContents.toggleDevTools()}},{type:"separator"},{role:"resetzoom"},{role:"zoomin"},{role:"zoomout"},{type:"separator"},{role:"togglefullscreen"}]},{role:"window",submenu:[{role:"minimize"},{role:"close"}]},{role:"help",submenu:[{label:"Learn More",click:function(){require("electron").shell.openExternal("http://electron.atom.io")}}]}];if("darwin"===process.platform){var name_1=electron_1.app.getName();defaulttemplate.unshift({label:name_1,submenu:[{role:"about"},{type:"separator"},{role:"services",submenu:[]},{type:"separator"},{role:"hide"},{role:"hideothers"},{role:"unhide"},{type:"separator"},{role:"quit"}]}),defaulttemplate[1].submenu.push({type:"separator"},{label:"Speech",submenu:[{role:"startspeaking"},{role:"stopspeaking"}]}),defaulttemplate[3].submenu=[{label:"Close",accelerator:"CmdOrCtrl+W",role:"close"},{label:"Minimize",accelerator:"CmdOrCtrl+M",role:"minimize"},{label:"Zoom",role:"zoom"},{type:"separator"},{label:"Bring All to Front",role:"front"}]}var MenuManager=function(){function e(e){void 0===e&&(e=defaulttemplate),this.template=e}return e.prototype.getMenu=function(){return electron_1.Menu.buildFromTemplate(this.template)},e.prototype.apply=function(e){return electron_1.Menu.setApplicationMenu(this.getMenu()),this},e.prototype.pushItem=function(e,t,l){void 0===l&&(l=[]),console.warn("Please do not use the pushItem method, it has bugs and may crash the program");for(var o,n,r,a=e.split("."),i=this.template,s=[],u=0;u<a.length;u++){for(var m=!1,c=0;c<i.length;c++)if(i[c].label==a[u]){delete i[i.indexOf(i[c])],s[u-1]?s[u-1].submenu=i:this.template=i,s.push(i[u]),i[c].submenu||(i[c].submenu=[]),i=i[c].submenu,m=!0;break}m||(s.push({label:a[u],submenu:[]}),i=[])}s[s.length-1].submenu.push(t);for(u=s.length-1;0<u;u--)s[u-1].submenu.push(s[u]);this.template=(o=this.template,n=s[0],null!=l[r=0]?o.splice(l[r],0,s[0]):o.push(n),o)},e}();exports.MenuManager=MenuManager;var ItemOptions=function(){};exports.default=MenuManager;