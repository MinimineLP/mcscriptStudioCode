{"version":3,"sources":["mineeditor.ts"],"names":["editor_config","import_material_icons","material_icons","apply_style","language","words","word","lines","line","columns","column","style","editorcontent","insertAfter","newNode","referenceNode","parentNode","insertBefore","nextSibling","addStyle","code","document","createElement","innerHTML","head","appendChild","addStylesheet","fileName","link","type","rel","href","guid","s4","Math","floor","random","toString","substring","getFirstSubElementByClass","element","getclass","_i","_a","childNodes","length","c","className","getEditorCanvas","editor","Element","prototype","remove","this","parentElement","removeChild","toManageEditors","global","reloadEditors","elts_1","getElementsByClassName","editors_1","i","id","classList","add","display","setAttribute","value","placeholder","onkeyup","onkeydown","onkeypress","onclick","onmousedown","onmouseup","addEventListener","target","event","tagName","toLowerCase","ctrlKey","window","open","focus","preventDefault","push","bef","LastTickContent","EditorLastTickContent","body","e","shiftKey","altKey","editorButtons","getSelection","children","dataset","attribute","child","getAttribute","click","execCommand","prompt","navigator","clipboard","readText","then","text","color","setInterval","toManageEditors_1","getElementById","cols","linesWord","wordsWord","colsWord","linesContainer","wordsContainer","colsContainer","innerText","match","tooltip","matchingElements","allElements","getElementsByTagName","n","getAllElementsWithAttribute","forEach","el","position","_x","_y","positionInfo","getBoundingClientRect","height","width","isNaN","offsetLeft","offsetTop","scrollLeft","scrollTop","offsetParent","top","left","getPosition","tooltip_1"],"mappings":"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","file":"mineeditor.js","sourcesContent":["/**\n * @author Minimine <https://github.com/MinimineLP>\n *\n * @name Editor\n * @version 0.0.1\n * @since 0.0.1\n *\n * @copyright Copyright (c) 2018 by Minimine, all reights reserved\n * @license MIT\n *\n */\n\n/**\n * Start of the config\n */\nconst editor_config = {\n  import_material_icons: false, // Import googles material icons from googleapis\n  material_icons: \"MaterialDesign-Webfont-master/css/materialdesignicons.css\",\n  apply_style: false, // Should the stylesheet be added?\n  language: {\n    words: \"words\",\n    word: \"word\",\n    lines: \"lines\",\n    line: \"line\",\n    columns: \"columns\",\n    column: \"column\"\n  },\n  style: `\n\t `,\n  editorcontent: `\n\t <div class=\"MineEditor-menuebar\">\n\t\t <button class=\"MineEditor-button\" data-attribute=\"undo\" tooltip=\"undo\"><i class=\"material-icons mdi mdi-arrow-left\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"redo\" tooltip=\"redo\"><i class=\"material-icons mdi mdi-arrow-right\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"paste\" tooltip=\"paste text\"><i class=\"material-icons mdi mdi-content-paste\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"copy\" tooltip=\"copy selection\"><i class=\"material-icons mdi mdi-content-copy\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"cut\" tooltip=\"cut selection\"><i class=\"material-icons mdi mdi-content-cut\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"bold\" tooltip=\"fromat bold\"><i class=\"mdi mdi-format-bold\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"italic\" tooltip=\"fromat italic\"><i class=\"mdi mdi-format-italic\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"underline\" tooltip=\"fromat underline\"><i class=\"mdi mdi-format-underline\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"strikeThrough\" tooltip=\"fromat strikethrough\"><i class=\"mdi mdi-format-strikethrough-variant\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"justifyleft\" tooltip=\"justify left\"><i class=\"mdi mdi-format-align-left\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"justifycenter\" tooltip=\"justify center\"><i class=\"mdi mdi-format-align-center\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"justifyright\" tooltip=\"justify right\"><i class=\"mdi mdi-format-align-right\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"justifyFull\" tooltip=\"justify full\"><i class=\"mdi mdi-format-align-justify\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"foreColor\" tooltip=\"color text\"><input type=\"color\" hidden/><i class=\"mdi mdi-format-color-text\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"backColor\" tooltip=\"color background\"><input type=\"color\" hidden/><i class=\"mdi mdi-format-color-fill\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"insertUnorderedList\" tooltip=\"insert unordered list\"><i class=\"mdi mdi-format-list-bulleted\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"insertOrderedList\" tooltip=\"insert ordered list\"><i class=\"mdi mdi-format-list-numbers\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"createLink\" tooltip=\"create link\"><i class=\"mdi mdi-link-variant\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"unlink\" tooltip=\"remove link\"><i class=\"mdi mdi-link-variant-off\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"insertImage\" tooltip=\"insert image\"><i class=\"mdi mdi-image\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"insertEmote\" tooltip=\"insert emote\"><i class=\"mdi mdi-emoticon\"></i></button>\n\t\t <button class=\"MineEditor-button\" data-attribute=\"delete\" tooltip=\"delete\"><i class=\"mdi mdi-backspace\"></i></button>\n\t </div>\n\t \t<div class=\"MineEditor-canvas\" contenteditable></div>\n \t \t<div class=\"MineEditor-bottom\">\n      <p class=\"MineEditor-lines\"></p>\n      <p class=\"MineEditor-words\"></p>\n      <p class=\"MineEditor-columns\"></p>\n      <p class=\"MineEditor-credits\">by <a href=\"https://github.com/MinimineLP/\" target=\"_blank\">Minimine</a></p>\n    </div>\n\t `\n};\n\n/**\n * End of the config\n */\n\nElement.prototype.remove = function() {\n  this.parentElement.removeChild(this);\n};\n\n/*\n * Functions\n */\n// InsertAfter: insert a element after another element\nfunction insertAfter(newNode, referenceNode) {\n  referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n}\n\n// addCssCode: add css code\nfunction addStyle(code) {\n  let style = document.createElement(\"style\");\n  style.innerHTML = code;\n  document.head.appendChild(style);\n}\n\n// addCss: add a css file\nfunction addStylesheet(fileName) {\n  // create <link> to import stylesheet\n  let link = document.createElement(\"link\");\n\n  link.type = \"text/css\";\n  link.rel = \"stylesheet\";\n  link.href = fileName;\n\n  document.head.appendChild(link);\n}\n\n// guid: returns a uuid\nfunction guid() {\n  function s4() {\n    return Math.floor((1 + Math.random()) * 0x10000)\n      .toString(16)\n      .substring(1);\n  }\n  return (\n    s4() +\n    s4() +\n    \"-\" +\n    s4() +\n    \"-\" +\n    s4() +\n    \"-\" +\n    s4() +\n    \"-\" +\n    s4() +\n    s4() +\n    s4()\n  );\n}\n\n// getFirstSubElementByClass\nfunction getFirstSubElementByClass(element, getclass) {\n  for (let c of element.childNodes) {\n    if (c.className == getclass) {\n      return c;\n    }\n  }\n}\n\n// getEditorCanvas: get editor canvas from editor\nfunction getEditorCanvas(editor) {\n  return getFirstSubElementByClass(editor, \"MineEditor-canvas\");\n}\n\nlet toManageEditors = [];\n\n//@ts-ignore\nglobal.reloadEditors = function() {\n  let elts = document.getElementsByClassName(\"MineEditor\");\n\n  //@ts-ignore\n  for (let el of elts) {\n    el.remove();\n  }\n  toManageEditors = [];\n\n  // Get editors\n  let editors = document.getElementsByClassName(\"editor\");\n\n  //@ts-ignore\n  for (let i of editors) {\n    let id = guid();\n    let editor = document.createElement(\"div\");\n    editor.innerHTML = editor_config.editorcontent;\n    editor.classList.add(\"MineEditor\");\n    editor.id = id;\n    i.style.display = \"none\";\n    i.setAttribute(\"editor\", id);\n\n    getEditorCanvas(editor).innerHTML = i.value;\n    getEditorCanvas(editor).setAttribute(\"placeholder\", i.placeholder);\n    getEditorCanvas(editor).onkeyup = i.onkeyup;\n    getEditorCanvas(editor).onkeydown = i.onkeydown;\n    getEditorCanvas(editor).onkeypress = i.onkeypress;\n    getEditorCanvas(editor).onclick = i.onclick;\n    getEditorCanvas(editor).onmousedown = i.onmousedown;\n    getEditorCanvas(editor).onmouseup = i.onmouseup;\n\n    getEditorCanvas(editor).addEventListener(\"click\", function() {\n      let target = event.target;\n\n      //@ts-ignore\n      if (target.tagName.toLowerCase() == \"a\") {\n        //@ts-ignore\n        if (target.href) {\n          //@ts-ignore\n          if (event.ctrlKey) {\n            //@ts-ignore\n            window.open(target.href, \"_blank\").focus();\n            event.preventDefault();\n          }\n        }\n      }\n    });\n    insertAfter(editor, i);\n\n    toManageEditors.push({\n      id: id,\n      bef: i,\n      LastTickContent: guid(),\n      EditorLastTickContent: guid()\n    });\n  }\n\n  document.body.addEventListener(\"keydown\", function(e) {\n    if (e.ctrlKey) document.body.classList.add(\"ctrl_pressed\");\n    if (e.shiftKey) document.body.classList.add(\"shift_pressed\");\n    if (e.altKey) document.body.classList.add(\"alt_pressed\");\n  });\n\n  document.body.addEventListener(\"keyup\", function(e) {\n    if (!e.ctrlKey) document.body.classList.remove(\"ctrl_pressed\");\n    if (!e.shiftKey) document.body.classList.remove(\"shift_pressed\");\n    if (!e.altKey) document.body.classList.remove(\"alt_pressed\");\n  });\n\n  if (editor_config.import_material_icons)\n    addStylesheet(editor_config.material_icons);\n  if (editor_config.apply_style) addStyle(editor_config.style);\n\n  let editorButtons = document.getElementsByClassName(\"MineEditor-button\");\n\n  let setAttribute = element => {\n    let selection = window.getSelection();\n\n    //@ts-ignore\n    getSelection(getEditorCanvas(element.parentNode.parentNode));\n    let children = element.childNodes;\n\n    if (element.dataset.attribute == \"paste\") {\n      //@ts-ignore\n      navigator.clipboard.readText().then(function(text) {\n        document.execCommand(\"insertHTML\", false, text);\n      });\n      return;\n    }\n\n    // Emotes\n    if (element.dataset.attribute == \"insertEmote\") {\n      window.open(\"https://emojipedia.org/\", \"_blank\");\n      return;\n    }\n\n    // Link & image\n    if (\n      element.dataset.attribute == \"createLink\" ||\n      element.dataset.attribute == \"insertImage\"\n    ) {\n      let link = prompt(\"Please enter the Link here\");\n      if (link != null)\n        document.execCommand(element.dataset.attribute, false, link);\n      return;\n    }\n\n    // Children (for the color selects)\n    for (let i = 0; i < children.length; i++) {\n      let child = children[i];\n      if (\n        child.tagName.toLowerCase() == \"input\" &&\n        child.getAttribute(\"type\").toLowerCase() == \"color\"\n      ) {\n        child.click();\n      }\n    }\n\n    // Execute command\n    document.execCommand(element.dataset.attribute, false);\n  };\n\n  // Apply Listeners to buttons\n  for (let i = 0; i < editorButtons.length; i++) {\n    //@ts-ignore\n    let children: HTMLElement[] = editorButtons[i].childNodes;\n\n    for (let c = 0; c < children.length; c++) {\n      let child: HTMLElement = children[c];\n\n      // Manage inputs (for colors)\n      if (\n        child.tagName.toLowerCase() == \"input\" &&\n        child.getAttribute(\"type\").toLowerCase() == \"color\"\n      ) {\n        child.addEventListener(\"change\", function() {\n          //@ts-ignore\n          let color = this.value;\n          let element = this.parentElement;\n          if (color != null)\n            document.execCommand(element.dataset.attribute, true, color);\n        });\n      }\n    }\n    editorButtons[i].addEventListener(\n      \"click\",\n      function(e) {\n        //@ts-ignore\n        if (event.target.tagName.toLowerCase() == \"input\") return;\n        e.preventDefault();\n        setAttribute(this);\n      },\n      false\n    );\n  }\n};\n\n//@ts-ignore\nglobal.reloadEditors();\n\nsetInterval(function() {\n  for (let i of toManageEditors) {\n    let editor = document.getElementById(i.id);\n\n    if (i.LastTickContent != i.bef.value) {\n      getEditorCanvas(editor).innerHTML = i.bef.value;\n    } else if (i.EditorLastTickContent != getEditorCanvas(editor).innerHTML) {\n      i.bef.value = getEditorCanvas(editor).innerHTML;\n    } else continue;\n\n    i.LastTickContent = i.bef.value;\n    i.EditorLastTickContent = getEditorCanvas(editor).innerHTML;\n\n    let lines = 0,\n      words = 0,\n      cols = 0,\n      linesWord = editor_config.language.lines,\n      wordsWord = editor_config.language.words,\n      colsWord = editor_config.language.columns,\n      linesContainer = getFirstSubElementByClass(\n        getFirstSubElementByClass(editor, \"MineEditor-bottom\"),\n        \"MineEditor-lines\"\n      ),\n      wordsContainer = getFirstSubElementByClass(\n        getFirstSubElementByClass(editor, \"MineEditor-bottom\"),\n        \"MineEditor-words\"\n      ),\n      colsContainer = getFirstSubElementByClass(\n        getFirstSubElementByClass(editor, \"MineEditor-bottom\"),\n        \"MineEditor-columns\"\n      );\n\n    if (getEditorCanvas(editor).innerText.match(/\\n/g))\n      lines = getEditorCanvas(editor).innerText.match(/\\n/g).length;\n    if (getEditorCanvas(editor).innerText.match(/\\S+/g))\n      words = getEditorCanvas(editor).innerText.match(/\\S+/g).length;\n    cols = getEditorCanvas(editor).innerText.length;\n\n    if (lines == 0) lines = 1;\n\n    if (lines == 1) linesWord = editor_config.language.line;\n    if (words == 1) wordsWord = editor_config.language.word;\n    if (cols == 1) colsWord = editor_config.language.column;\n\n    linesContainer.innerHTML = `${lines} ${linesWord}`;\n    wordsContainer.innerHTML = `${words} ${wordsWord}`;\n    colsContainer.innerHTML = `${cols} ${colsWord}`;\n  }\n}, 1);\n\n(function() {\n  function getPosition(el) {\n    let _x = 0;\n    let _y = 0;\n    let positionInfo = el.getBoundingClientRect();\n    let height = positionInfo.height;\n    let width = positionInfo.width;\n    while (el && !isNaN(el.offsetLeft) && !isNaN(el.offsetTop)) {\n      _x += el.offsetLeft - el.scrollLeft;\n      _y += el.offsetTop - el.scrollTop;\n      el = el.offsetParent;\n    }\n    return { top: _y, left: _x, width: width, height: height };\n  }\n\n  function getAllElementsWithAttribute(attribute) {\n    let matchingElements = [];\n    let allElements = document.getElementsByTagName(\"*\");\n    for (let i = 0, n = allElements.length; i < n; i++) {\n      if (allElements[i].getAttribute(attribute) !== null) {\n        // Element exists with attribute. Add to array.\n        matchingElements.push(allElements[i]);\n      }\n    }\n    return matchingElements;\n  }\n\n  let tooltip = document.createElement(\"div\");\n  tooltip.id = \"MineEditor_tooltip\";\n  tooltip.style.display = \"none\";\n  document.body.appendChild(tooltip);\n\n  getAllElementsWithAttribute(\"tooltip\").forEach(function(el) {\n    el.addEventListener(\"mouseenter\", function(e) {\n      if (this.getAttribute(\"tooltip\")) {\n        let position = getPosition(this);\n        let tooltip = document.getElementById(\"MineEditor_tooltip\");\n        tooltip.innerHTML = this.getAttribute(\"tooltip\");\n        tooltip.style.top = position.top + position.height + 3 + \"px\";\n        tooltip.style.left = position.left + position.width / 2 + \"px\";\n        tooltip.style.display = null;\n      }\n      el.addEventListener(\"mouseleave\", function(e) {\n        tooltip.style.display = \"none\";\n      });\n    });\n  });\n})();\n"]}