"use strict";var __extends=function(){var n=function(e,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)};return function(e,r){function t(){this.constructor=e}n(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}();exports.__esModule=!0;var fs=require("fs"),pluginmanager_1=require("@mcscriptstudiocode/pluginmanager"),ignorefile=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return __extends(r,e),r.prototype.setup=function(){},r.prototype.start=function(){this.api.getAPI("explorer").onReload(afterExplorerReload)},r.prototype.stop=function(){},r.prototype.reload=function(){},r}(pluginmanager_1.Plugin);function afterExplorerReload(e){return function t(o,c){Object.keys(o).forEach(function(e){var r=o[e];if(".mcscriptstudiocodeignore"==e.toLowerCase()){var t=fs.readFileSync(r,"utf8"),n=(t=t.replace(/\r/,"")).split(/\n/g);c=c.concat(n)}});var n=createFilter(c);Object.keys(o).forEach(function(e){var r=o[e];testFilterMatch(n,e)&&delete o[e],r instanceof Object&&(r=t(r,c))})}(e,[]),e}function parseIgnoreExpression(e){return e="^"+e.replace(/\\/,"\\\\").replace(/\./,"\\.").replace(/\[/,"\\[").replace(/\]/,"\\]").replace(/\(/,"\\]").replace(/\)/,"\\]").replace(/\{/,"\\]").replace(/\}/,"\\]").replace(/\*/,".*").replace(/\//,"\\/").replace(/\^/,"\\^").replace(/\$/,"\\$").replace(/\?/,"\\?").replace(/\+/,"\\+").replace(/\=/,"\\=").replace(/\|/,"\\|").replace(/\,/,"\\,").replace(/\=/,"\\=").replace(/\=/,"\\="),e+="$",new RegExp(e)}function createFilter(e){var r=[];for(var t in e)r.push(parseIgnoreExpression(e[t]));return r}function testFilterMatch(e,r){for(var t in e)if(e[t].test(r))return!0;return!1}exports.default=ignorefile;
//# sourceMappingURL=Ignorefile.js.map
