{"version":3,"sources":["Explorer.js","Explorer.ts"],"names":["__extends","d","b","extendStatics","setPrototypeOf","Object","__proto__","Array","p","hasOwnProperty","__","this","constructor","prototype","create","thisArg","_arguments","P","generator","Promise","resolve","reject","step","next","value","e","rejected","result","then","fulfilled","apply","__generator","body","f","y","t","g","_","label","trys","ops","verb","throw","return","Symbol","iterator","op","TypeError","call","done","pop","length","push","sent","n","v","exports","editor","ctxmenuapi","rle","pluginmanager_1","require","contextmenu_1","fs","os","$","swal","dir","working_dir","replace","Explorer","_super","arguments","setup","server","addElement","addStylesheet","__dirname","registerAPI","ExplorerAPI","start","getAPI","mousedown","event","which","removeClass","target","prop","parentNode","addClass","mouseup","click","children","trigger","parent","mouseover","mouseleave","bind","path","attr","lstatSync","isDirectory","show","ContextMenu","ContextMenuPoint","name","showCreateDialogFile","showCreateDialogFolder","showRenameDialog","showDeleteDialog","isFile","preventDefault","menuactionapi","on","startExplorer","stop","reload","Plugin","explorer_openedfolders","reloadExplorer","files","getIcon","ending","file","_a","i","listFiles","orl","remove","append","generateHTMLTree","key","endsWith","filename","ret","k","split","text","hide","indexOf","open","each","includes","watchFile","onReload","func","directory","readdirSync","match","standartpath","__awaiter","res","content","element","attributes","placeholder","type","buttons","existsSync","writeFileSync","userInfo","username","deleteFolderRecursive","forEach","curPath","unlinkSync","rmdirSync","mkdirSync","console","log","renameSync","dangerMode","global"],"mappings":"AAAA,aACA,IAAIA,UAAyC,WAAzCA,IAAAA,EAAa,SAAQC,EAAAC,GAG8D,OAF/EC,EAAAA,OAAgBC,gBAChBD,CAAAA,UAAgBE,cAAOD,OAClB,SAAEE,EAAWJ,GAAbD,EAAAK,UAA6BC,IAA2BN,SAAEK,EAAFJ,GAAA,IAAA,IAAAM,KAAAN,EAAAA,EAAAO,eAAAD,KAAAP,EAAAO,GAAAN,EAAAM,MACzCP,EAAAC,IAAmB,OAAA,SAAIA,EAAEO,GAAiC,SAF9EC,IAAAC,KAAAC,YAAAX,EAEsBE,EAAAF,EAAAC,GACtBD,EAAAY,UAAOV,OAAAA,EAAPE,OAAAS,OAAAZ,IAAAQ,EAAAG,UAAAX,EAAAW,UAAA,IAAAH,IALqC,GAQrCP,UAAA,SAAAY,EAAAC,EAAAC,EAAAC,GACA,OAAA,IAAAD,IAAcA,EAAAE,UAAA,SAAAC,EAAAC,GAAE,SAAKT,EAAAA,GAAL,IAAAU,EAAAJ,EAAAK,KAAAC,IAAA,MAAAC,GAAAJ,EAAAI,IAAuB,SAAAC,EAAAF,GAAA,IAAAF,EAAAJ,EAAA,MAAAM,IAAA,MAAAC,GAAAJ,EAAAI,IACvCxB,SAAEY,EAAYX,GAAAyB,EAAatB,KAAOS,EAApBa,EAAoCd,OAAYX,IAAEW,EAAAA,SAAWO,GAA3EA,EAAAO,EAAAH,SAAAI,KAAAC,EAAAH,GAHJJ,GAAAJ,EAAAA,EAAAY,MAAAf,EAAAC,GAAA,KAAAO,WAOAQ,YAA0CX,SAASC,EAAQW,GACvD,IAA0BC,EAAAC,EAAAC,EAAAC,EAA1BC,EAAA,CAAAC,MAAST,EAAAA,KAAUL,WAAO,GAAA,EAAAW,EAAA,GAAA,MAAAA,EAAA,GAAA,OAAAA,EAAA,IAAAI,KAAA,GAAAC,IAAA,IAAE,OAAAJ,EAAA,CAAIb,KAAAkB,EAAA,GAAAC,MAAAD,EAAA,GAAAE,OAAAF,EAAA,IAAA,mBAAAG,SAAAR,EAAAQ,OAAAC,UAAA,WAAA,OAAAlC,OAAAyB,EAAEd,SAAAA,EAAAA,GAAKJ,OAAAA,SAAeM,GAApB,OAA8B,SAACsB,GAAYzB,GAAAA,EAAAA,MAAAA,IAAA0B,UAAA,mCAAY,KAAAV,GAAA,IAAE,GAAAJ,EAAA,EAAAC,IAAAC,EAAA,EAAAW,EAAA,GAAAZ,EAAA,OAAAY,EAAA,GAAAZ,EAAA,SAAAC,EAAAD,EAAA,SAAAC,EAAAa,KAAAd,GAAA,GAAAA,EAAAX,SAAAY,EAAAA,EAAAa,KAAAd,EAAAY,EAAA,KAAAG,KAAA,OAAAd,EAChE,OAA3BD,EAASR,EAAAA,IAASF,EAAlB,CAAyB,EAAzBsB,EAAyB,GAAAX,EAAAX,QAAMsB,EAAA,IAAExB,KAAKJ,EAAAA,KAAAA,EAAUiB,EAAAW,EAAStB,MAAW,KAAOC,EAAG,OAAAY,EAAAC,QAAA,CAAAd,MAAAsB,EAAA,GAAAG,MAAA,GAAE5B,KAAAA,EAAAgB,EAAAC,QAAAJ,EAAAY,EAAA,GAAAA,EAAA,CAAA,GAAA,SAAY,KAAA,EAAAA,EAAAT,EAAAG,IAAAU,MAAAb,EAAAE,KAAAW,MAAA,SAAE,QACrF5B,KAAaa,EAAA,GAARR,EAAQU,EAAAE,MAAAY,QAAAhB,EAAAA,EAAAgB,OAAA,MAAA,IAAAL,EAAA,IAAA,IAAAA,EAAA,IAAA,CAAAT,EAAA,EAAA,SAASY,GAAetB,IAAtBmB,EAAc1B,MAAeI,GAA7BsB,EAAsC,GAAAX,EAAM,IAAAW,EAAU1B,GAAAA,EAAV,IAAmB,CAAAiB,EAAAC,MAAAQ,EAAA,GAAA,MAAE1B,GAAeI,IAAPG,EAAAA,IAARU,EAAAC,MAAAH,EAAA,GAAA,CAAAE,EAAAC,MAAAH,EAAA,GAAAA,EAAAW,EAAA,MAA+BjB,GAAAA,GAA1DQ,EAAqEX,MAArES,EAAtC,GAAA,CAAAE,EAAAC,MAAAH,EAAA,GAAAE,EAAAG,IAAAY,KAAAN,GAAA,MAAuHX,EAAA,IAAAE,EAAAG,IAAAU,MACzIhC,EAAAA,KAAYA,MAAAA,SAL1B4B,EAAAd,EAAAgB,KAAAjC,EAAAsB,GAQIN,MAAAA,GAAee,EAAA,CAAA,EAAQrB,GAAAS,EAAA,EANsE,QAM/ED,EAA8BE,EAAA,EACxCE,GAAMC,EAAFQ,EAAER,GAAF,MAAYe,EAAM,GAAA,MAAA,CAAA7B,MAAWsB,EAAA,GAAAA,EAAA,QAAA,EAAAG,MAAA,GAPC3B,CAAA,CAAAgC,EAAAC,OAOtCC,QAAsGvB,YAAtG,ECvBJ,IAYIwB,OACAC,WAGAC,IAhBJC,gBAAAC,QAAA,qCAEAC,cAAAD,QAAA,0CAMAE,GAAAF,QAAA,MACAG,GAAAH,QAAA,MACAI,EAAAJ,QAAA,UACAK,KAAAL,QAAA,cAIIM,IAAMC,YAAYC,QAAQ,MAAO,KAAK,IAG1CC,SAAA,SAAAC,GAAA,SAAAD,IDUQ,OAAA,OAAOjC,GAAPkC,EAAAzC,MAAAnB,KAAA6D,YAAA7D,KCsFR,OAhGsCX,UAAAsE,EAAAC,GAIpCD,EAAAzD,UAAA4D,MAAA,SAAMC,IACJ/D,KAAK+D,OAASA,GACPC,WAAW,sDAClBD,EAAOE,cAAiBC,UAAS,qBACjCH,EAAOI,YAAY,WAAW,IAAIC,cAGpCT,EAAAzD,UAAAmE,MAAA,SAAMN,GACJjB,OAASiB,EAAOO,OAAO,UACvBvB,WAAagB,EAAOO,OAAO,eAC3BtE,KAAK+D,OAASA,EACdT,EAAE,aAAaiB,UAAU,SAASC,GACd,GAAfA,EAAMC,QACPnB,EAAE,qBAAqBoB,YAAY,UACE,KAAlCpB,EAAEkB,EAAMG,QAAQC,KAAK,aAAoD,KAAlCtB,EAAEkB,EAAMG,QAAQC,KAAK,aAAoD,OAAlCtB,EAAEkB,EAAMG,QAAQC,KAAK,aACpGtB,EAAEkB,EAAMG,OAAOE,YAAYC,SAAS,UACtCxB,EAAEkB,EAAMG,QAAQG,SAAS,aAG7BxB,EAAE,aAAayB,QAAQ,SAASP,GACZ,GAAfA,EAAMC,OAAYnB,EAAE,qBAAqBoB,YAAY,YAE1DpB,EAAE,aAAa0B,MAAM,SAASR,GACV,GAAfA,EAAMC,QAC8B,MAAlCnB,EAAEkB,EAAMG,QAAQC,KAAK,aAAkBtB,EAAEkB,EAAMG,QAAQM,SAAS,KAAKC,QAAQ,SAC3C,KAAlC5B,EAAEkB,EAAMG,QAAQC,KAAK,aAAoD,OAAlCtB,EAAEkB,EAAMG,QAAQC,KAAK,aAAmBtB,EAAEkB,EAAMG,QAAQQ,SAASF,SAAS,KAAKC,QAAQ,YAGrI5B,EAAE,aAAa8B,UAAU,SAASZ,GAChClB,EAAE,oBAAoBoB,YAAY,SACG,KAAlCpB,EAAEkB,EAAMG,QAAQC,KAAK,aAAoD,KAAlCtB,EAAEkB,EAAMG,QAAQC,KAAK,aAAoD,OAAlCtB,EAAEkB,EAAMG,QAAQC,KAAK,aACpGtB,EAAEkB,EAAMG,OAAOE,YAAYC,SAAS,SACtCxB,EAAEkB,EAAMG,QAAQG,SAAS,WAE3BxB,EAAE,aAAa+B,WAAW,SAASb,GACjClB,EAAE,oBAAoBoB,YAAY,WAEpCpB,EAAE,aAAagC,KAAK,cAAe,SAASxE,GAC1C,IAAI6D,EAASrB,EAAEkB,MAAMG,QAGrB,GAFqC,KAAlCrB,EAAEkB,MAAMG,QAAQC,KAAK,aAAoD,KAAlCtB,EAAEkB,MAAMG,QAAQC,KAAK,aAAoD,OAAlCtB,EAAEkB,MAAMG,QAAQC,KAAK,cAAmBD,EAASA,EAAOQ,UAE7G,MAAzBR,EAAOC,KAAK,YAAf,CAEA,IAAIW,EAAOZ,EAAOa,KAAK,QACpBpC,GAAGqC,UAAUF,GAAMG,eAAc3C,WAAW4C,KAAK,IAAIxC,cAAAyC,YAAY,CAClE,CACE,IAAIzC,cAAA0C,iBAAiB,CAACC,KAAK,WAAYd,MAAO,WAC5Ce,qBAAqBR,EAAK,QAE5B,IAAIpC,cAAA0C,iBAAiB,CAACC,KAAK,aAAcd,MAAO,WAC9CgB,uBAAuBT,EAAK,SAGhC,CACE,IAAIpC,cAAA0C,iBAAiB,CAACC,KAAK,SAAUd,MAAO,WAC1CiB,iBAAiBV,MAEnB,IAAIpC,cAAA0C,iBAAiB,CAACC,KAAK,SAAUd,MAAO,WAC1CkB,iBAAiBX,UAIpBnC,GAAGqC,UAAUF,GAAMY,UAASpD,WAAW4C,KAAK,IAAIxC,cAAAyC,YAAY,CAC7D,CACE,IAAIzC,cAAA0C,iBAAiB,CAACC,KAAK,SAAUd,MAAO,WAC1CiB,iBAAiBV,MAEnB,IAAIpC,cAAA0C,iBAAiB,CAACC,KAAK,SAAUd,MAAO,WAC1CkB,iBAAiBX,UAIvBzE,EAAEsF,oBAGJ,IAAIC,EAA8BtC,EAAOO,OAAO,eAChD+B,EAAcC,GAAG,WAAW,WAC1BP,yBAEFM,EAAcC,GAAG,kBAAkB,WACjCN,2BAEFO,cAAcxC,IAGhBJ,EAAAzD,UAAAsG,KAAA,SAAKzC,GACH/D,KAAK+D,OAASA,GAGhBJ,EAAAzD,UAAAuG,OAAA,SAAO1C,GACL/D,KAAK+D,OAASA,GAElBJ,EAhGA,CAAsCV,gBAAAyD,QAkGtC,SAASH,cAAcxC,GACrB,IAAI4C,EAAyB,CAAC,KAI9B,SAAeC,IAlCLX,OAAAA,UAAAA,UAAAA,OAAiBV,EAAjB,WAwCN,IAAA/B,EAAAqD,EAASC,EACP,OAAA1F,YAAI2F,KAASC,SAAAC,GAJjB,IAAQC,KAFJ1D,EAAMC,YACNoD,EAAQM,UAAU3D,GACTO,EAAOO,OAAO,YAAY8C,IAAIP,EAAQ9C,EAAOO,OAAO,YAAY8C,IAAIF,GAAGL,GAApF,OAgCAvD,EAAG,iBAAkB+D,SACrB/D,EAAG,aAAcgE,OAAQ,yBA/BzB,SAASC,EAAiBC,EAAKX,GAc7B,IAAIf,EAAO0B,EAIX,GAHG1B,EAAK2B,SAAS,OAAK3B,EAAOA,EAAKpC,QAAQ,MAAM,KAChDoC,EAAO4B,SAAS5B,GAEbe,aAAiBnH,OAAQ,CAC1B,IAAIiI,EAAM,yBAAyBH,EAAG,iEAAiEtD,UAAS,kCAAkC4B,EAAI,iCACtJ,IAAI,IAAI8B,KAAKf,EACXc,GAAOJ,EAAoBC,EAAG,IAAII,EAAIf,EAAMe,IAG9C,OADAD,GAAM,aAIN,MAAO,0BAA0Bd,EAAK,eA1BxC,SAAiBG,GAEf,OADaA,EAAKa,MAAM,KAAKb,EAAKa,MAAM,KAAKrF,OAAO,IAElD,IAAK,WACH,OAAU0B,UAAS,6BACrB,IAAK,aACH,OAAUA,UAAS,+BACrB,IAAK,SACH,OAAUA,UAAS,2BACrB,QACE,OAAUA,UAAS,6BAgB8B4C,CAAQD,GAAM,UAAUf,EAAI,YAInCyB,CAAiB/D,EAAIqD,GAAM,QAE7EvD,EAAE,qBAAqB0B,MAAM,WAC3B,IAAIO,EAAOjC,EAAEtD,MAAMmF,SAASK,KAAK,QACd,uBAAhBlC,EAAEtD,MAAM8H,QACTxE,EAAEtD,MAAMmF,SAASF,SAAS,MAAM8C,OAChCzE,EAAEtD,MAAM8H,KAAK,+BACNnB,EAAuBA,EAAuBqB,QAAQzC,MAG7DjC,EAAEtD,MAAMmF,SAASF,SAAS,MAAMU,OAChCrC,EAAEtD,MAAM8H,KAAK,uBACbnB,EAAuBlE,KAAK8C,MAIhCjC,EAAE,mBAAmB0B,MAAM,WACzB,IAAIO,EAAOjC,EAAEtD,MAAMwF,KAAK,QACxB1C,OAAOmF,KAAK1C,KAGdjC,EAAE,uBAAuB4E,KAAK,WACzBvB,EAAuBwB,SAAS7E,EAAEtD,MAAMwF,KAAK,WAC9ClC,EAAEtD,MAAMiF,SAAS,MAAMU,OACvBrC,EAAEtD,MAAMiF,SAAS,KAAK6C,KAAK,0BAzD/B,CAAA,OANF1E,GAAGgF,UAAU3E,YAAa,GAAImD,GAC9BA,IAkEA5D,IAAM4D,EAhHG/D,QAAA,QAP+Dc,SA0H1E,IAAAS,YAAA,WAAA,SAAAA,IACEpE,KAAAoH,IAAiB,GAInB,OAHEhD,EAAAlE,UAAAmI,SAAA,SAASC,GACPtI,KAAKoH,IAAI3E,KAAK6F,IAElBlE,EALA,GAOA,SAAS+C,UAAUoB,GAEjB,GAAGnF,GAAGqC,UAAU8C,GAAW7C,cAAe,CAKxC,IAHA,IAAIiC,EAAc,GACdd,EAAQzD,GAAGoF,YAAYD,GAElBrB,EAAI,EAAGA,EAAIL,EAAMrE,OAAQ0E,IAC7B9D,GAAGqC,UAAa8C,EAAS,IAAI1B,EAAMK,IAAMxB,gBAAciC,EAAId,EAAMK,IAAMC,UAAaoB,EAAS,IAAI1B,EAAMK,KAE5G,IAASA,EAAI,EAAGA,EAAIL,EAAMrE,OAAQ0E,IAC7B9D,GAAGqC,UAAa8C,EAAS,IAAI1B,EAAMK,IAAMf,WAASwB,EAAId,EAAMK,IAAMC,UAAaoB,EAAS,IAAI1B,EAAMK,KAGvG,OAAOS,EAEF,OAAOY,EAGhB,SAASb,SAASnC,GAChB,OAAOA,EAAKkD,MAAM,YAAY,GAGhC,SAAe1C,qBAAqB2C,GA3BhC,YA2BgC,IAAAA,IAAAA,EAAA,IA3BhCC,UAAA3I,UAAA,OAAA,EAAA,WADF,IAAA4I,EAGF,OAAAxE,YAAApE,KAAA,SAAAiH,GALA,OAAAA,EAAAtF,OAOSwF,KAAUoB,EA0BN,OAFXG,EAAeA,EAAahF,QAAQ,MAAO,KAAKA,QAAQF,IAAI,IAEjD,CAAA,EAAMD,KAAK,CACpBuE,KAAM,sCACNe,QAAS,CACPC,QAAS,QACTC,WAAY,CACVlI,MAAO6H,EACPM,YAAa,gBACbC,KAAM,SAGVC,SAAS,KAhBCT,KAAL,EAkBP,OAAQ,OAZJG,EAAO3B,EAAAvE,QAYE,CAAA,IAGL,OAFRkG,EAAMA,EAAIlF,QAAQ,MAAO,OAEN,IAALkF,GAAUxF,GAAG+F,WAAW3F,IAAIoF,KACrCA,EAAInB,SAAS,aAAcrE,GAAGgG,cAAc5F,IAAIoF,EAAI,uCAAuCvF,GAAGgG,WAAWC,SAAQ,2EAA2E,SACvLV,EAAInB,SAAS,eAAgBrE,GAAGgG,cAAc5F,IAAIoF,EAAI,2GAA4G,SACrKxF,GAAGgG,cAAc5F,IAAIoF,EAAI,GAAG,UAEnC5F,MACA,CAAA,EAAO4F,SAGT,SAASW,sBAAuBhE,GAC1BnC,GAAG+F,WAAW5D,KAChBnC,GAAGoF,YAAYjD,GAAMiE,QAAQ,SAASxC,GACpC,IAAIyC,EAAUlE,EAAO,IAAMyB,EACvB5D,GAAGqC,UAAUgE,GAAS/D,cACxB6D,sBAAsBE,GAEtBrG,GAAGsG,WAAWD,KAGlBrG,GAAGuG,UAAUpE,IAIjB,SAAeS,uBAAuB0C,GDwC7B,YCxC6B,IAAAA,IAAAA,EAAA,IDQ9BC,UAAA3I,UAAA,OAAA,EAAA,WAFJ,IAAA4I,ECtBH,OAAAxH,YAAApB,KAAA,SAAAiH,GAEQsC,OAAAA,EAAAA,OACAJ,KAAH,EAgBO,OAFXT,EAAeA,EAAahF,QAAQ,MAAO,KAAKA,QAAQF,IAAI,IAEjD,CAAA,EAAMD,KAAK,CACpBuE,KAAM,wCACNe,QAAS,CACPC,QAAS,QACTC,WAAY,CACVlI,MAAO6H,EACPM,YAAa,gBACbC,KAAM,SAGVC,SAAS,KAbElD,KAAAA,EAeb,OAAQ,OAZJ4C,EAAO3B,EAAAvE,QAYE,CAAA,IAGL,OAFRkG,EAAMA,EAAIlF,QAAQ,MAAO,OAEN,IAALkF,GAAUxF,GAAG+F,WAAW1F,YAAY,IAAImF,IACpDxF,GAAGwG,UAAUpG,IAAIoF,GAEnB5F,MACA,CAAA,EAAO4F,SAGT,SAAe3C,iBAAiBV,GAjBxB1E,OAAAA,UAAAA,UAAAA,OAAAA,EAAO6H,WACPM,IAAAA,EACAC,OAAAA,YAAAA,KAAAA,SAAMhC,GAHI,OAAAA,EAAAtF,OAFL,KAAA,EAuBA,OAFX4D,EAAOA,EAAK7B,QAAQ,MAAO,KAAKA,QAAQF,IAAI,IAEjC,CAAA,EAAMD,KAAK,CACpBuE,KAAM,+BACNe,QAAS,CACPC,QAAS,QACTC,WAAY,CACVlI,MAAO0E,EACPyD,YAAazD,EACb0D,KAAM,SAGVC,SAAS,KDqBT,KAAA,ECnBF,OAAQ,OAZJN,EAAO3B,EAAAvE,QAYE,CAAA,IACbkG,EAAMA,EAAIlF,QAAQ,MAAO,KAEzBmG,QAAQC,IAAIlB,GACZxF,GAAG2G,WAAWvG,IAAI+B,EAAM/B,IAAIoF,GAC5B5F,MACA,CAAA,EAAO4F,SAGT,SAAe1C,iBAAiBX,GAhBxB1E,OAAAA,UAAAA,UAAAA,OAAAA,EADU,WAEVmI,IAAAA,EACAC,OAAAA,YAAAA,KAAAA,SAAMhC,GAHI,OAAAA,EAAAtF,OAFL,KAAA,EAQTuH,OAcC9F,GAAGqC,UAAUF,GAAMY,SAAgB,CAAA,EAAM5C,KAAK,CAC/CyG,YAAY,EACZlC,KAAM,sCAAsCvC,EAAK7B,QAAQ,MAAO,KAAKA,QAAQF,IAAI,IAAI,IACrF0F,SAAS,KAHR,CAAA,EAAA,GATHW,KAAAA,EAEA7G,OAO+B4F,EAAO3B,EAAAvE,OAPtCM,CAAAA,EAAAA,GACA,KAAA,EDiDU,OCrCFI,GAAGqC,UAAUF,GAAMG,cAAqB,CAAA,EAAMnC,KAAK,CACzDyG,YAAY,EACZlC,KAAM,wCAAwCvC,EAAK7B,QAAQ,MAAO,KAAKA,QAAQF,IAAI,IAAI,IACvF0F,SAAS,KAHH,CAAA,EAAA,GDmEF,KAAA,ECnEmCN,EAAO3B,EAAAvE,ODqE9BuE,EAAGtF,MAAX,EACI,KAAK,ECjEnB,OAAIiH,GACDxF,GAAGqC,UAAUF,GAAMG,cAAc6D,sBAAsBhE,GACrDnC,GAAGsG,WAAWnE,GACnBvC,MACA,CAAA,EAAO4F,IAJC,CAAA,QAOVqB,OAAO7F,YAAcA","file":"Explorer.js","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nvar pluginmanager_1 = require(\"@mcscriptstudiocode/pluginmanager\");\nvar contextmenu_1 = require(\"@mcscriptstudiocodeplugins/contextmenu\");\nvar fs = require(\"fs\");\nvar os = require(\"os\");\nvar $ = require(\"jquery\");\nvar swal = require(\"sweetalert\");\nvar editor;\nvar ctxmenuapi;\nvar dir = working_dir.replace(/\\\\/g, \"/\") + \"/\";\nvar rle;\nvar Explorer = /** @class */ (function (_super) {\n    __extends(Explorer, _super);\n    function Explorer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Explorer.prototype.setup = function (server) {\n        this.server = server;\n        server.addElement(\"<div id=\\\"explorer\\\"><h3>Project Explorer</h3></div>\");\n        server.addStylesheet(__dirname + \"/css/explorer.css\");\n        server.registerAPI(\"explorer\", new ExplorerAPI());\n    };\n    Explorer.prototype.start = function (server) {\n        editor = server.getAPI(\"editor\");\n        ctxmenuapi = server.getAPI(\"contextmenu\");\n        this.server = server;\n        $(\"#explorer\").mousedown(function (event) {\n            if (event.which == 1) {\n                $(\"#explorer .active\").removeClass(\"active\");\n                if ($(event.target).prop('nodeName') == \"P\" || $(event.target).prop('nodeName') == \"I\" || $(event.target).prop('nodeName') == \"IMG\")\n                    $(event.target.parentNode).addClass(\"active\");\n                $(event.target).addClass(\"active\");\n            }\n        });\n        $(\"#explorer\").mouseup(function (event) {\n            if (event.which == 1)\n                $(\"#explorer .active\").removeClass(\"active\");\n        });\n        $(\"#explorer\").click(function (event) {\n            if (event.which == 1) {\n                if ($(event.target).prop('nodeName') == \"LI\")\n                    $(event.target).children(\"i\").trigger(\"click\");\n                if ($(event.target).prop('nodeName') == \"P\" || $(event.target).prop('nodeName') == \"IMG\")\n                    $(event.target).parent().children(\"i\").trigger(\"click\");\n            }\n        });\n        $(\"#explorer\").mouseover(function (event) {\n            $(\"#explorer .hover\").removeClass(\"hover\");\n            if ($(event.target).prop('nodeName') == \"P\" || $(event.target).prop('nodeName') == \"I\" || $(event.target).prop('nodeName') == \"IMG\")\n                $(event.target.parentNode).addClass(\"hover\");\n            $(event.target).addClass(\"hover\");\n        });\n        $(\"#explorer\").mouseleave(function (event) {\n            $(\"#explorer .hover\").removeClass(\"hover\");\n        });\n        $('#explorer').bind('contextmenu', function (e) {\n            var target = $(event.target);\n            if ($(event.target).prop('nodeName') == \"P\" || $(event.target).prop('nodeName') == \"I\" || $(event.target).prop('nodeName') == \"IMG\")\n                target = target.parent();\n            if (target.prop('nodeName') != 'LI')\n                return;\n            var path = target.attr(\"path\");\n            if (fs.lstatSync(path).isDirectory())\n                ctxmenuapi.show(new contextmenu_1.ContextMenu([\n                    [\n                        new contextmenu_1.ContextMenuPoint({ name: \"New File\", click: function () {\n                                showCreateDialogFile(path + \"/\");\n                            } }),\n                        new contextmenu_1.ContextMenuPoint({ name: \"New Folder\", click: function () {\n                                showCreateDialogFolder(path + \"/\");\n                            } }),\n                    ],\n                    [\n                        new contextmenu_1.ContextMenuPoint({ name: \"Rename\", click: function () {\n                                showRenameDialog(path);\n                            } }),\n                        new contextmenu_1.ContextMenuPoint({ name: \"Delete\", click: function () {\n                                showDeleteDialog(path);\n                            } }),\n                    ]\n                ]));\n            if (fs.lstatSync(path).isFile())\n                ctxmenuapi.show(new contextmenu_1.ContextMenu([\n                    [\n                        new contextmenu_1.ContextMenuPoint({ name: \"Rename\", click: function () {\n                                showRenameDialog(path);\n                            } }),\n                        new contextmenu_1.ContextMenuPoint({ name: \"Delete\", click: function () {\n                                showDeleteDialog(path);\n                            } }),\n                    ]\n                ]));\n            e.preventDefault();\n        });\n        var menuactionapi = server.getAPI(\"menu_action\");\n        menuactionapi.on(\"file.new\", function () {\n            showCreateDialogFile();\n        });\n        menuactionapi.on(\"file.new_folder\", function () {\n            showCreateDialogFolder();\n        });\n        startExplorer(server);\n    };\n    Explorer.prototype.stop = function (server) {\n        this.server = server;\n    };\n    Explorer.prototype.reload = function (server) {\n        this.server = server;\n    };\n    return Explorer;\n}(pluginmanager_1.Plugin));\nexports[\"default\"] = Explorer;\nfunction startExplorer(server) {\n    var explorer_openedfolders = [\"/\"];\n    fs.watchFile(working_dir, {}, reloadExplorer);\n    reloadExplorer();\n    function reloadExplorer() {\n        return __awaiter(this, void 0, void 0, function () {\n            function generateHTMLTree(key, files) {\n                function getIcon(file) {\n                    var ending = file.split(\".\")[file.split(\".\").length - 1];\n                    switch (ending) {\n                        case \"mcscript\":\n                            return __dirname + \"/assets/icons/mcscript.png\";\n                        case \"mcfunction\":\n                            return __dirname + \"/assets/icons/mcfunction.png\";\n                        case \"mcmeta\":\n                            return __dirname + \"/assets/icons/mcmeta.png\";\n                        default:\n                            return __dirname + \"/assets/icons/unknown.png\";\n                    }\n                }\n                var name = key;\n                if (name.endsWith(\"/\"))\n                    name = name.replace(/\\/$/, \"\");\n                name = filename(name);\n                if (files instanceof Object) {\n                    var ret = \"<li class=\\\"dir\\\" path=\\\"\" + key + \"\\\"><i class=\\\"material-icons\\\">keyboard_arrow_right</i><img src=\\\"\" + __dirname + \"/assets/icons/folder.png\\\" /><p>\" + name + \"</p><ul style=\\\"display: none\\\">\";\n                    for (var k in files) {\n                        ret += generateHTMLTree(key + \"/\" + k, files[k]);\n                    }\n                    ret += \"</ul></li>\";\n                    return ret;\n                }\n                else {\n                    return \"<li class=\\\"file\\\" path=\\\"\" + files + \"\\\"><img src=\\\"\" + getIcon(files) + \"\\\" /><p>\" + name + \"</p></li>\";\n                }\n            }\n            var dir, files, i;\n            return __generator(this, function (_a) {\n                dir = working_dir;\n                files = listFiles(dir);\n                for (i in server.getAPI(\"explorer\").orl)\n                    files = server.getAPI(\"explorer\").orl[i](files);\n                $(\"#explorerlist\").remove();\n                $(\"#explorer\").append(\"<ul id=\\\"explorerlist\\\">\" + generateHTMLTree(dir, files) + \"</p>\");\n                $(\"#explorer ul li i\").click(function () {\n                    var path = $(this).parent().attr('path');\n                    if ($(this).text() == \"keyboard_arrow_down\") {\n                        $(this).parent().children('ul').hide();\n                        $(this).text(\"keyboard_arrow_right\");\n                        delete explorer_openedfolders[explorer_openedfolders.indexOf(path)];\n                    }\n                    else {\n                        $(this).parent().children('ul').show();\n                        $(this).text(\"keyboard_arrow_down\");\n                        explorer_openedfolders.push(path);\n                    }\n                });\n                $(\"#explorer .file\").click(function () {\n                    var path = $(this).attr('path');\n                    editor.open(path);\n                });\n                $(\"#explorer ul li.dir\").each(function () {\n                    if (explorer_openedfolders.includes($(this).attr('path'))) {\n                        $(this).children('ul').show();\n                        $(this).children('i').text(\"keyboard_arrow_down\");\n                    }\n                });\n                return [2 /*return*/];\n            });\n        });\n    }\n    rle = reloadExplorer;\n}\nvar ExplorerAPI = /** @class */ (function () {\n    function ExplorerAPI() {\n        this.orl = [];\n    }\n    ExplorerAPI.prototype.onReload = function (func) {\n        this.orl.push(func);\n    };\n    return ExplorerAPI;\n}());\nfunction listFiles(directory) {\n    if (fs.lstatSync(directory).isDirectory()) {\n        var ret = {};\n        var files = fs.readdirSync(directory);\n        for (var i = 0; i < files.length; i++) {\n            if (fs.lstatSync(directory + \"/\" + files[i]).isDirectory())\n                ret[files[i]] = listFiles(directory + \"/\" + files[i]);\n        }\n        for (var i = 0; i < files.length; i++) {\n            if (fs.lstatSync(directory + \"/\" + files[i]).isFile())\n                ret[files[i]] = listFiles(directory + \"/\" + files[i]);\n        }\n        return ret;\n    }\n    else\n        return directory;\n}\nfunction filename(path) {\n    return path.match(/[^\\\\/]*$/)[0];\n}\nfunction showCreateDialogFile(standartpath) {\n    if (standartpath === void 0) { standartpath = \"\"; }\n    return __awaiter(this, void 0, void 0, function () {\n        var res;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    standartpath = standartpath.replace(/\\\\/g, \"/\").replace(dir, \"\");\n                    return [4 /*yield*/, swal({\n                            text: 'Type in the file you want to create',\n                            content: {\n                                element: \"input\",\n                                attributes: {\n                                    value: standartpath,\n                                    placeholder: \"The file path\",\n                                    type: \"text\"\n                                }\n                            },\n                            buttons: true\n                        })];\n                case 1:\n                    res = (_a.sent());\n                    if (res == null)\n                        return [2 /*return*/];\n                    res = res.replace(/\\\\/g, \"/\");\n                    if (res != null && res != \"\" && !fs.existsSync(dir + res)) { //res.substring(res.lastIndexOf(\"/scripts/\")+7,res.length)\n                        if (res.endsWith(\".mcscript\"))\n                            fs.writeFileSync(dir + res, \"#file: ./unknown\\n\\n/**\\n * @author \" + os.userInfo().username + \"\\n * @project unknown\\n * @since 0.0.1\\n * @version 0.0.1\\n *\\n */\\n\\n\\n\", \"utf-8\");\n                        else if (res.endsWith(\"pack.mcmeta\"))\n                            fs.writeFileSync(dir + res, \"{\\n  \\\"pack\\\": {\\n    \\\"pack_format\\\": 1,\\n    \\\"description\\\": \\\"Pack generated by mcscriptStudioCode\\\"\\n  }\\n}\", 'utf-8');\n                        else\n                            fs.writeFileSync(dir + res, \"\", \"utf-8\");\n                    }\n                    rle();\n                    return [2 /*return*/, res];\n            }\n        });\n    });\n}\nfunction deleteFolderRecursive(path) {\n    if (fs.existsSync(path)) {\n        fs.readdirSync(path).forEach(function (file) {\n            var curPath = path + \"/\" + file;\n            if (fs.lstatSync(curPath).isDirectory()) { // recurse\n                deleteFolderRecursive(curPath);\n            }\n            else { // delete file\n                fs.unlinkSync(curPath);\n            }\n        });\n        fs.rmdirSync(path);\n    }\n}\nfunction showCreateDialogFolder(standartpath) {\n    if (standartpath === void 0) { standartpath = \"\"; }\n    return __awaiter(this, void 0, void 0, function () {\n        var res;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    standartpath = standartpath.replace(/\\\\/g, \"/\").replace(dir, \"\");\n                    return [4 /*yield*/, swal({\n                            text: 'Type in the folder you want to create',\n                            content: {\n                                element: \"input\",\n                                attributes: {\n                                    value: standartpath,\n                                    placeholder: \"The file path\",\n                                    type: \"text\"\n                                }\n                            },\n                            buttons: true\n                        })];\n                case 1:\n                    res = (_a.sent());\n                    if (res == null)\n                        return [2 /*return*/];\n                    res = res.replace(/\\\\/g, \"/\");\n                    if (res != null && res != \"\" && !fs.existsSync(working_dir + \"/\" + res)) {\n                        fs.mkdirSync(dir + res);\n                    }\n                    rle();\n                    return [2 /*return*/, res];\n            }\n        });\n    });\n}\nfunction showRenameDialog(path) {\n    return __awaiter(this, void 0, void 0, function () {\n        var res;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    path = path.replace(/\\\\/g, \"/\").replace(dir, \"\");\n                    return [4 /*yield*/, swal({\n                            text: 'Please type in the file name',\n                            content: {\n                                element: \"input\",\n                                attributes: {\n                                    value: path,\n                                    placeholder: path,\n                                    type: \"text\"\n                                }\n                            },\n                            buttons: true\n                        })];\n                case 1:\n                    res = (_a.sent());\n                    if (res == null)\n                        return [2 /*return*/];\n                    res = res.replace(/\\\\/g, \"/\");\n                    console.log(res);\n                    fs.renameSync(dir + path, dir + res);\n                    rle();\n                    return [2 /*return*/, res];\n            }\n        });\n    });\n}\nfunction showDeleteDialog(path) {\n    return __awaiter(this, void 0, void 0, function () {\n        var res;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!fs.lstatSync(path).isFile()) return [3 /*break*/, 2];\n                    return [4 /*yield*/, swal({\n                            dangerMode: true,\n                            text: 'Do you realy want to delete file \"/' + path.replace(/\\\\/g, \"/\").replace(dir, \"\") + '\"',\n                            buttons: true\n                        })];\n                case 1:\n                    res = (_a.sent());\n                    return [3 /*break*/, 4];\n                case 2:\n                    if (!fs.lstatSync(path).isDirectory()) return [3 /*break*/, 4];\n                    return [4 /*yield*/, swal({\n                            dangerMode: true,\n                            text: 'Do you realy want to delete folder \"/' + path.replace(/\\\\/g, \"/\").replace(dir, \"\") + '\"',\n                            buttons: true\n                        })];\n                case 3:\n                    res = (_a.sent());\n                    _a.label = 4;\n                case 4:\n                    if (!res)\n                        return [2 /*return*/];\n                    if (fs.lstatSync(path).isDirectory())\n                        deleteFolderRecursive(path);\n                    else\n                        fs.unlinkSync(path);\n                    rle();\n                    return [2 /*return*/, res];\n            }\n        });\n    });\n}\nglobal.ExplorerAPI = ExplorerAPI;\n","import {ServerApi,Plugin} from '@mcscriptstudiocode/pluginmanager';\r\nimport {Editor} from '@mcscriptstudiocodeplugins/editor';\r\nimport {ContextMenuAPI, ContextMenuPoint, ContextMenu} from '@mcscriptstudiocodeplugins/contextmenu';\r\n\r\ndeclare class MenuActionAPI {listeners:any;on(key:string, func:Function);trigger(key:string);}\r\ndeclare let working_dir:string;\r\ndeclare let global:any;\r\n\r\nimport * as fs from 'fs';\r\nimport * as os from 'os';\r\nimport * as $ from 'jquery';\r\nimport * as swal from 'sweetalert';\r\nlet editor:Editor;\r\nlet ctxmenuapi:ContextMenuAPI;\r\n\r\nlet dir = working_dir.replace(/\\\\/g, \"/\")+\"/\";\r\nlet rle:Function;\r\n\r\nexport default class Explorer extends Plugin {\r\n\r\n  server:ServerApi;\r\n\r\n  setup(server){\r\n    this.server = server;\r\n    server.addElement(`<div id=\"explorer\"><h3>Project Explorer</h3></div>`);\r\n    server.addStylesheet(`${__dirname}/css/explorer.css`);\r\n    server.registerAPI(\"explorer\",new ExplorerAPI());\r\n  }\r\n\r\n  start(server){\r\n    editor = server.getAPI(\"editor\");\r\n    ctxmenuapi = server.getAPI(\"contextmenu\");\r\n    this.server = server;\r\n    $(\"#explorer\").mousedown(function(event) {\r\n      if(event.which == 1) {\r\n        $(\"#explorer .active\").removeClass(\"active\");\r\n        if($(event.target).prop('nodeName')==\"P\"||$(event.target).prop('nodeName')==\"I\"||$(event.target).prop('nodeName')==\"IMG\")\r\n          $(event.target.parentNode).addClass(\"active\");\r\n        $(event.target).addClass(\"active\");\r\n      }\r\n    });\r\n    $(\"#explorer\").mouseup(function(event) {\r\n      if(event.which == 1) $(\"#explorer .active\").removeClass(\"active\");\r\n    });\r\n    $(\"#explorer\").click(function(event) {\r\n      if(event.which == 1) {\r\n        if($(event.target).prop('nodeName')==\"LI\")$(event.target).children(\"i\").trigger(\"click\");\r\n        if($(event.target).prop('nodeName')==\"P\"||$(event.target).prop('nodeName')==\"IMG\")$(event.target).parent().children(\"i\").trigger(\"click\");\r\n      }\r\n    });\r\n    $(\"#explorer\").mouseover(function(event) {\r\n      $(\"#explorer .hover\").removeClass(\"hover\");\r\n      if($(event.target).prop('nodeName')==\"P\"||$(event.target).prop('nodeName')==\"I\"||$(event.target).prop('nodeName')==\"IMG\")\r\n        $(event.target.parentNode).addClass(\"hover\");\r\n      $(event.target).addClass(\"hover\");\r\n    });\r\n    $(\"#explorer\").mouseleave(function(event){\r\n      $(\"#explorer .hover\").removeClass(\"hover\");\r\n    });\r\n    $('#explorer').bind('contextmenu', function(e){\r\n      let target = $(event.target);\r\n      if($(event.target).prop('nodeName')==\"P\"||$(event.target).prop('nodeName')==\"I\"||$(event.target).prop('nodeName')==\"IMG\")target = target.parent();\r\n\r\n      if(target.prop('nodeName')!='LI')return;\r\n\r\n      let path = target.attr(\"path\");\r\n      if(fs.lstatSync(path).isDirectory())ctxmenuapi.show(new ContextMenu([\r\n        [\r\n          new ContextMenuPoint({name:\"New File\", click: function() {\r\n            showCreateDialogFile(path+\"/\")\r\n          }}),\r\n          new ContextMenuPoint({name:\"New Folder\", click: function() {\r\n            showCreateDialogFolder(path+\"/\")\r\n          }}),\r\n        ],\r\n        [\r\n          new ContextMenuPoint({name:\"Rename\", click: function() {\r\n            showRenameDialog(path)\r\n          }}),\r\n          new ContextMenuPoint({name:\"Delete\", click: function() {\r\n            showDeleteDialog(path)\r\n          }}),\r\n        ]\r\n      ]));\r\n      if(fs.lstatSync(path).isFile())ctxmenuapi.show(new ContextMenu([\r\n        [\r\n          new ContextMenuPoint({name:\"Rename\", click: function() {\r\n            showRenameDialog(path)\r\n          }}),\r\n          new ContextMenuPoint({name:\"Delete\", click: function() {\r\n            showDeleteDialog(path)\r\n          }}),\r\n        ]\r\n      ]));\r\n      e.preventDefault();\r\n    });\r\n\r\n    let menuactionapi:MenuActionAPI = server.getAPI(\"menu_action\");\r\n    menuactionapi.on(\"file.new\",function() {\r\n      showCreateDialogFile();\r\n    });\r\n    menuactionapi.on(\"file.new_folder\",function() {\r\n      showCreateDialogFolder();\r\n    });\r\n    startExplorer(server);\r\n  }\r\n\r\n  stop(server){\r\n    this.server = server;\r\n  }\r\n\r\n  reload(server) {\r\n    this.server = server;\r\n  }\r\n}\r\n\r\nfunction startExplorer(server:ServerApi) {\r\n  let explorer_openedfolders = [\"/\"];\r\n  fs.watchFile(working_dir, {}, reloadExplorer);\r\n  reloadExplorer();\r\n\r\n  async function reloadExplorer() {\r\n    let dir = working_dir;\r\n    let files = listFiles(dir);\r\n    for(let i in server.getAPI(\"explorer\").orl)files = server.getAPI(\"explorer\").orl[i](files);\r\n\r\n    function generateHTMLTree(key, files) {\r\n      function getIcon(file) {\r\n        let ending = file.split(\".\")[file.split(\".\").length-1];\r\n        switch(ending) {\r\n          case \"mcscript\":\r\n            return `${__dirname}/assets/icons/mcscript.png`;\r\n          case \"mcfunction\":\r\n            return `${__dirname}/assets/icons/mcfunction.png`;\r\n          case \"mcmeta\":\r\n            return `${__dirname}/assets/icons/mcmeta.png`;\r\n          default:\r\n            return `${__dirname}/assets/icons/unknown.png`;\r\n        }\r\n      }\r\n      let name = key;\r\n      if(name.endsWith(\"/\"))name = name.replace(/\\/$/,\"\");\r\n      name = filename(name);\r\n\r\n      if(files instanceof Object) {\r\n        var ret = `<li class=\"dir\" path=\"${key}\"><i class=\"material-icons\">keyboard_arrow_right</i><img src=\"${__dirname}/assets/icons/folder.png\" /><p>${name}</p><ul style=\"display: none\">`;\r\n        for(let k in files) {\r\n          ret += generateHTMLTree(`${key}/${k}`,files[k]);\r\n        }\r\n        ret +=`</ul></li>`;\r\n        return ret;\r\n      }\r\n      else {\r\n        return `<li class=\"file\" path=\"${files}\"><img src=\"${getIcon(files)}\" /><p>${name}</p></li>`;\r\n      }\r\n    }\r\n    $( \"#explorerlist\" ).remove();\r\n    $( \"#explorer\" ).append( `<ul id=\"explorerlist\">${generateHTMLTree(dir,files)}</p>` );\r\n\r\n    $(\"#explorer ul li i\").click(function() {\r\n      var path = $(this).parent().attr('path');\r\n      if($(this).text()==\"keyboard_arrow_down\") {\r\n        $(this).parent().children('ul').hide();\r\n        $(this).text(\"keyboard_arrow_right\");\r\n        delete explorer_openedfolders[explorer_openedfolders.indexOf(path)];\r\n      }\r\n      else {\r\n        $(this).parent().children('ul').show();\r\n        $(this).text(\"keyboard_arrow_down\");\r\n        explorer_openedfolders.push(path);\r\n      }\r\n    });\r\n\r\n    $(\"#explorer .file\").click(function() {\r\n      let path = $(this).attr('path');\r\n      editor.open(path);\r\n    });\r\n\r\n    $(\"#explorer ul li.dir\").each(function() {\r\n      if(explorer_openedfolders.includes($(this).attr('path'))) {\r\n        $(this).children('ul').show();\r\n        $(this).children('i').text(\"keyboard_arrow_down\");\r\n      }\r\n    });\r\n  }\r\n  rle = reloadExplorer;\r\n}\r\n\r\nclass ExplorerAPI {\r\n  orl:Function[] = []\r\n  onReload(func:Function) {\r\n    this.orl.push(func)\r\n  }\r\n}\r\n\r\nfunction listFiles(directory:string): any {\r\n\r\n  if(fs.lstatSync(directory).isDirectory()) {\r\n\r\n    let ret: Object = {};\r\n    let files = fs.readdirSync(directory);\r\n\r\n    for (var i = 0; i < files.length; i++) {\r\n      if(fs.lstatSync(`${directory}/${files[i]}`).isDirectory())ret[files[i]] = listFiles(`${directory}/${files[i]}`);\r\n    }\r\n    for (var i = 0; i < files.length; i++) {\r\n      if(fs.lstatSync(`${directory}/${files[i]}`).isFile())ret[files[i]] = listFiles(`${directory}/${files[i]}`);\r\n    }\r\n\r\n    return ret;\r\n\r\n  } else return directory;\r\n}\r\n\r\nfunction filename(path:string):string {\r\n  return path.match(/[^\\\\/]*$/)[0];\r\n}\r\n\r\nasync function showCreateDialogFile(standartpath = \"\"):Promise<string> {\r\n  standartpath = standartpath.replace(/\\\\/g, \"/\").replace(dir,\"\");\r\n  //@ts-ignore\r\n  let res = (await swal({\r\n    text: 'Type in the file you want to create',\r\n    content: {\r\n      element: \"input\",\r\n      attributes: {\r\n        value: standartpath,\r\n        placeholder: \"The file path\",\r\n        type: \"text\",\r\n      },\r\n    },\r\n    buttons: true\r\n  }));\r\n  if(res==null)return;\r\n  res = res.replace(/\\\\/g, \"/\");\r\n\r\n  if(res!=null&&res!=\"\"&&!fs.existsSync(dir+res)){//res.substring(res.lastIndexOf(\"/scripts/\")+7,res.length)\r\n    if(res.endsWith(\".mcscript\")) fs.writeFileSync(dir+res,`#file: ./unknown\\n\\n/**\\n * @author ${os.userInfo().username}\\n * @project unknown\\n * @since 0.0.1\\n * @version 0.0.1\\n *\\n */\\n\\n\\n`,\"utf-8\");\r\n    else if(res.endsWith(\"pack.mcmeta\")) fs.writeFileSync(dir+res,`{\\n  \"pack\": {\\n    \"pack_format\": 1,\\n    \"description\": \"Pack generated by mcscriptStudioCode\"\\n  }\\n}`, 'utf-8');\r\n    else fs.writeFileSync(dir+res,\"\",\"utf-8\");\r\n  }\r\n  rle();\r\n  return res;\r\n}\r\n\r\nfunction deleteFolderRecursive (path: fs.PathLike) {\r\n  if (fs.existsSync(path)) {\r\n    fs.readdirSync(path).forEach(function(file){\r\n      var curPath = path + \"/\" + file;\r\n      if (fs.lstatSync(curPath).isDirectory()) { // recurse\r\n        deleteFolderRecursive(curPath);\r\n      } else { // delete file\r\n        fs.unlinkSync(curPath);\r\n      }\r\n    });\r\n    fs.rmdirSync(path);\r\n  }\r\n}\r\n\r\nasync function showCreateDialogFolder(standartpath = \"\"):Promise<string> {\r\n  standartpath = standartpath.replace(/\\\\/g, \"/\").replace(dir,\"\");\r\n  //@ts-ignore\r\n  let res = (await swal({\r\n    text: 'Type in the folder you want to create',\r\n    content: {\r\n      element: \"input\",\r\n      attributes: {\r\n        value: standartpath,\r\n        placeholder: \"The file path\",\r\n        type: \"text\",\r\n      },\r\n    },\r\n    buttons: true\r\n  }));\r\n  if(res==null)return;\r\n  res = res.replace(/\\\\/g, \"/\");\r\n\r\n  if(res!=null&&res!=\"\"&&!fs.existsSync(working_dir+\"/\"+res)){\r\n    fs.mkdirSync(dir+res);\r\n  }\r\n  rle();\r\n  return res;\r\n}\r\n\r\nasync function showRenameDialog(path):Promise<string> {\r\n  path = path.replace(/\\\\/g, \"/\").replace(dir,\"\");\r\n  //@ts-ignore\r\n  let res = (await swal({\r\n    text: 'Please type in the file name',\r\n    content: {\r\n      element: \"input\",\r\n      attributes: {\r\n        value: path,\r\n        placeholder: path,\r\n        type: \"text\",\r\n      },\r\n    },\r\n    buttons: true\r\n  }));\r\n  if(res==null)return;\r\n  res = res.replace(/\\\\/g, \"/\");\r\n\r\n  console.log(res);\r\n  fs.renameSync(dir+path, dir+res)\r\n  rle();\r\n  return res;\r\n}\r\n\r\nasync function showDeleteDialog(path):Promise<string> {\r\n  let res;\r\n  //@ts-ignore\r\n  if(fs.lstatSync(path).isFile())res = (await swal({\r\n    dangerMode: true,\r\n    text: 'Do you realy want to delete file \"/'+path.replace(/\\\\/g, \"/\").replace(dir,\"\")+'\"',\r\n    buttons: true\r\n  }));\r\n  //@ts-ignore\r\n  else if(fs.lstatSync(path).isDirectory())res = (await swal({\r\n    dangerMode: true,\r\n    text: 'Do you realy want to delete folder \"/'+path.replace(/\\\\/g, \"/\").replace(dir,\"\")+'\"',\r\n    buttons: true\r\n  }));\r\n  if(!res)return;\r\n  if(fs.lstatSync(path).isDirectory())deleteFolderRecursive(path);\r\n  else fs.unlinkSync(path);\r\n  rle();\r\n  return res;\r\n}\r\n\r\nglobal.ExplorerAPI = ExplorerAPI;\r\n"]}