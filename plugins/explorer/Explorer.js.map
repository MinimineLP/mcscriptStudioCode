{"version":3,"sources":["Explorer.js","Explorer.ts"],"names":["__extends","d","b","extendStatics","setPrototypeOf","Object","__proto__","Array","p","hasOwnProperty","__","this","constructor","prototype","create","thisArg","_arguments","P","generator","Promise","resolve","reject","step","next","value","e","rejected","result","then","fulfilled","apply","__generator","body","f","y","t","g","_","label","trys","ops","verb","throw","return","Symbol","iterator","op","TypeError","call","done","pop","length","push","sent","n","v","exports","editor","ctxmenuapi","rle","pluginmanager_1","require","contextmenu_1","fs","os","$","swal","dir","working_dir","replace","Explorer","_super","arguments","setup","api","addElement","addStylesheet","__dirname","registerAPI","ExplorerAPI","start","getAPI","mousedown","event","which","removeClass","target","prop","parentNode","addClass","mouseup","click","children","trigger","parent","mouseover","mouseleave","bind","path","attr","lstatSync","isDirectory","show","ContextMenu","ContextMenuPoint","name","showCreateDialogFile","showCreateDialogFolder","showRenameDialog","showDeleteDialog","isFile","preventDefault","menuactionapi","on","startExplorer","stop","reload","Plugin","explorer_openedfolders","reloadExplorer","files","i","_a","listFiles","orl","remove","append","generateHTMLTree","key","endsWith","filename","ret","k","file","split","getIcon","text","hide","indexOf","open","each","includes","watchFile","onReload","func","directory","readdirSync","match","standartpath","__awaiter","res","content","element","attributes","placeholder","type","buttons","existsSync","writeFileSync","userInfo","username","deleteFolderRecursive","forEach","curPath","unlinkSync","rmdirSync","mkdirSync","console","log","renameSync","dangerMode","global"],"mappings":"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","file":"Explorer.js","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nvar pluginmanager_1 = require(\"@mcscriptstudiocode/pluginmanager\");\nvar contextmenu_1 = require(\"@mcscriptstudiocodeplugins/contextmenu\");\nvar fs = require(\"fs\");\nvar os = require(\"os\");\nvar $ = require(\"jquery\");\nvar swal = require(\"sweetalert\");\nvar editor;\nvar ctxmenuapi;\nvar dir = working_dir.replace(/\\\\/g, \"/\") + \"/\";\nvar rle;\nvar Explorer = /** @class */ (function (_super) {\n    __extends(Explorer, _super);\n    function Explorer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Explorer.prototype.setup = function () {\n        this.api.addElement(\"<div id=\\\"explorer\\\"><h3>Project Explorer</h3></div>\");\n        this.api.addStylesheet(__dirname + \"/style/css/global.min.css\");\n        this.api.registerAPI(\"explorer\", new ExplorerAPI());\n    };\n    Explorer.prototype.start = function () {\n        editor = this.api.getAPI(\"editor\");\n        ctxmenuapi = this.api.getAPI(\"contextmenu\");\n        $(\"#explorer\").mousedown(function (event) {\n            if (event.which == 1) {\n                $(\"#explorer .active\").removeClass(\"active\");\n                if ($(event.target).prop(\"nodeName\") == \"P\" ||\n                    $(event.target).prop(\"nodeName\") == \"I\" ||\n                    $(event.target).prop(\"nodeName\") == \"IMG\")\n                    $(event.target.parentNode).addClass(\"active\");\n                $(event.target).addClass(\"active\");\n            }\n        });\n        $(\"#explorer\").mouseup(function (event) {\n            if (event.which == 1)\n                $(\"#explorer .active\").removeClass(\"active\");\n        });\n        $(\"#explorer\").click(function (event) {\n            if (event.which == 1) {\n                if ($(event.target).prop(\"nodeName\") == \"LI\")\n                    $(event.target)\n                        .children(\"i\")\n                        .trigger(\"click\");\n                if ($(event.target).prop(\"nodeName\") == \"P\" ||\n                    $(event.target).prop(\"nodeName\") == \"IMG\")\n                    $(event.target)\n                        .parent()\n                        .children(\"i\")\n                        .trigger(\"click\");\n            }\n        });\n        $(\"#explorer\").mouseover(function (event) {\n            $(\"#explorer .hover\").removeClass(\"hover\");\n            if ($(event.target).prop(\"nodeName\") == \"P\" ||\n                $(event.target).prop(\"nodeName\") == \"I\" ||\n                $(event.target).prop(\"nodeName\") == \"IMG\")\n                $(event.target.parentNode).addClass(\"hover\");\n            $(event.target).addClass(\"hover\");\n        });\n        $(\"#explorer\").mouseleave(function (event) {\n            $(\"#explorer .hover\").removeClass(\"hover\");\n        });\n        $(\"#explorer\").bind(\"contextmenu\", function (e) {\n            var target = $(event.target);\n            if ($(event.target).prop(\"nodeName\") == \"P\" ||\n                $(event.target).prop(\"nodeName\") == \"I\" ||\n                $(event.target).prop(\"nodeName\") == \"IMG\")\n                target = target.parent();\n            if (target.prop(\"nodeName\") != \"LI\")\n                return;\n            var path = target.attr(\"path\");\n            if (fs.lstatSync(path).isDirectory())\n                ctxmenuapi.show(new contextmenu_1.ContextMenu([\n                    [\n                        new contextmenu_1.ContextMenuPoint({\n                            name: \"New File\",\n                            click: function () {\n                                showCreateDialogFile(path + \"/\");\n                            }\n                        }),\n                        new contextmenu_1.ContextMenuPoint({\n                            name: \"New Folder\",\n                            click: function () {\n                                showCreateDialogFolder(path + \"/\");\n                            }\n                        })\n                    ],\n                    [\n                        new contextmenu_1.ContextMenuPoint({\n                            name: \"Rename\",\n                            click: function () {\n                                showRenameDialog(path);\n                            }\n                        }),\n                        new contextmenu_1.ContextMenuPoint({\n                            name: \"Delete\",\n                            click: function () {\n                                showDeleteDialog(path);\n                            }\n                        })\n                    ]\n                ]));\n            if (fs.lstatSync(path).isFile())\n                ctxmenuapi.show(new contextmenu_1.ContextMenu([\n                    [\n                        new contextmenu_1.ContextMenuPoint({\n                            name: \"Rename\",\n                            click: function () {\n                                showRenameDialog(path);\n                            }\n                        }),\n                        new contextmenu_1.ContextMenuPoint({\n                            name: \"Delete\",\n                            click: function () {\n                                showDeleteDialog(path);\n                            }\n                        })\n                    ]\n                ]));\n            e.preventDefault();\n        });\n        var menuactionapi = this.api.getAPI(\"menu_action\");\n        menuactionapi.on(\"file.new\", function () {\n            showCreateDialogFile();\n        });\n        menuactionapi.on(\"file.new_folder\", function () {\n            showCreateDialogFolder();\n        });\n        startExplorer(this.api);\n    };\n    Explorer.prototype.stop = function () { };\n    Explorer.prototype.reload = function () { };\n    return Explorer;\n}(pluginmanager_1.Plugin));\nexports[\"default\"] = Explorer;\nfunction startExplorer(api) {\n    var explorer_openedfolders = [\"/\"];\n    fs.watchFile(working_dir, {}, reloadExplorer);\n    reloadExplorer();\n    function reloadExplorer() {\n        return __awaiter(this, void 0, void 0, function () {\n            function generateHTMLTree(key, files) {\n                function getIcon(file) {\n                    var ending = file.split(\".\")[file.split(\".\").length - 1];\n                    switch (ending) {\n                        case \"mcscript\":\n                            return __dirname + \"/assets/icons/mcscript.png\";\n                        case \"mcfunction\":\n                            return __dirname + \"/assets/icons/mcfunction.png\";\n                        case \"mcmeta\":\n                            return __dirname + \"/assets/icons/mcmeta.png\";\n                        default:\n                            return __dirname + \"/assets/icons/unknown.png\";\n                    }\n                }\n                var name = key;\n                if (name.endsWith(\"/\"))\n                    name = name.replace(/\\/$/, \"\");\n                name = filename(name);\n                if (files instanceof Object) {\n                    var ret = \"<li class=\\\"dir\\\" path=\\\"\" + key + \"\\\"><i class=\\\"material-icons\\\">keyboard_arrow_right</i><img src=\\\"\" + __dirname + \"/assets/icons/folder.png\\\" /><p>\" + name + \"</p><ul style=\\\"display: none\\\">\";\n                    for (var k in files) {\n                        ret += generateHTMLTree(key + \"/\" + k, files[k]);\n                    }\n                    ret += \"</ul></li>\";\n                    return ret;\n                }\n                else {\n                    return \"<li class=\\\"file\\\" path=\\\"\" + files + \"\\\"><img src=\\\"\" + getIcon(files) + \"\\\" /><p>\" + name + \"</p></li>\";\n                }\n            }\n            var dir, files, i;\n            return __generator(this, function (_a) {\n                dir = working_dir;\n                files = listFiles(dir);\n                for (i in api.getAPI(\"explorer\").orl)\n                    files = api.getAPI(\"explorer\").orl[i](files);\n                $(\"#explorerlist\").remove();\n                $(\"#explorer\").append(\"<ul id=\\\"explorerlist\\\">\" + generateHTMLTree(dir, files) + \"</p>\");\n                $(\"#explorer ul li i\").click(function () {\n                    var path = $(this)\n                        .parent()\n                        .attr(\"path\");\n                    if ($(this).text() == \"keyboard_arrow_down\") {\n                        $(this)\n                            .parent()\n                            .children(\"ul\")\n                            .hide();\n                        $(this).text(\"keyboard_arrow_right\");\n                        delete explorer_openedfolders[explorer_openedfolders.indexOf(path)];\n                    }\n                    else {\n                        $(this)\n                            .parent()\n                            .children(\"ul\")\n                            .show();\n                        $(this).text(\"keyboard_arrow_down\");\n                        explorer_openedfolders.push(path);\n                    }\n                });\n                $(\"#explorer .file\").click(function () {\n                    var path = $(this).attr(\"path\");\n                    editor.open(path);\n                });\n                $(\"#explorer ul li.dir\").each(function () {\n                    if (explorer_openedfolders.includes($(this).attr(\"path\"))) {\n                        $(this)\n                            .children(\"ul\")\n                            .show();\n                        $(this)\n                            .children(\"i\")\n                            .text(\"keyboard_arrow_down\");\n                    }\n                });\n                return [2 /*return*/];\n            });\n        });\n    }\n    rle = reloadExplorer;\n}\nvar ExplorerAPI = /** @class */ (function () {\n    function ExplorerAPI() {\n        this.orl = [];\n    }\n    ExplorerAPI.prototype.onReload = function (func) {\n        this.orl.push(func);\n    };\n    return ExplorerAPI;\n}());\nfunction listFiles(directory) {\n    if (fs.lstatSync(directory).isDirectory()) {\n        var ret = {};\n        var files = fs.readdirSync(directory);\n        for (var i = 0; i < files.length; i++) {\n            if (fs.lstatSync(directory + \"/\" + files[i]).isDirectory())\n                ret[files[i]] = listFiles(directory + \"/\" + files[i]);\n        }\n        for (var i = 0; i < files.length; i++) {\n            if (fs.lstatSync(directory + \"/\" + files[i]).isFile())\n                ret[files[i]] = listFiles(directory + \"/\" + files[i]);\n        }\n        return ret;\n    }\n    else\n        return directory;\n}\nfunction filename(path) {\n    return path.match(/[^\\\\/]*$/)[0];\n}\nfunction showCreateDialogFile(standartpath) {\n    if (standartpath === void 0) { standartpath = \"\"; }\n    return __awaiter(this, void 0, void 0, function () {\n        var res;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    standartpath = standartpath.replace(/\\\\/g, \"/\").replace(dir, \"\");\n                    return [4 /*yield*/, swal({\n                            text: \"Type in the file you want to create\",\n                            content: {\n                                element: \"input\",\n                                attributes: {\n                                    value: standartpath,\n                                    placeholder: \"The file path\",\n                                    type: \"text\"\n                                }\n                            },\n                            buttons: true\n                        })];\n                case 1:\n                    res = _a.sent();\n                    if (res == null)\n                        return [2 /*return*/];\n                    res = res.replace(/\\\\/g, \"/\");\n                    if (res != null && res != \"\" && !fs.existsSync(dir + res)) {\n                        //res.substring(res.lastIndexOf(\"/scripts/\")+7,res.length)\n                        if (res.endsWith(\".mcscript\"))\n                            fs.writeFileSync(dir + res, \"#file: ./unknown\\n\\n/**\\n * @author \" + os.userInfo().username + \"\\n * @project unknown\\n * @since 0.0.1\\n * @version 0.0.1\\n *\\n */\\n\\n\\n\", \"utf-8\");\n                        else if (res.endsWith(\"pack.mcmeta\"))\n                            fs.writeFileSync(dir + res, \"{\\n  \\\"pack\\\": {\\n    \\\"pack_format\\\": 1,\\n    \\\"description\\\": \\\"Pack generated by mcscriptStudioCode\\\"\\n  }\\n}\", \"utf-8\");\n                        else\n                            fs.writeFileSync(dir + res, \"\", \"utf-8\");\n                    }\n                    rle();\n                    return [2 /*return*/, res];\n            }\n        });\n    });\n}\nfunction deleteFolderRecursive(path) {\n    if (fs.existsSync(path)) {\n        fs.readdirSync(path).forEach(function (file) {\n            var curPath = path + \"/\" + file;\n            if (fs.lstatSync(curPath).isDirectory()) {\n                // recurse\n                deleteFolderRecursive(curPath);\n            }\n            else {\n                // delete file\n                fs.unlinkSync(curPath);\n            }\n        });\n        fs.rmdirSync(path);\n    }\n}\nfunction showCreateDialogFolder(standartpath) {\n    if (standartpath === void 0) { standartpath = \"\"; }\n    return __awaiter(this, void 0, void 0, function () {\n        var res;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    standartpath = standartpath.replace(/\\\\/g, \"/\").replace(dir, \"\");\n                    return [4 /*yield*/, swal({\n                            text: \"Type in the folder you want to create\",\n                            content: {\n                                element: \"input\",\n                                attributes: {\n                                    value: standartpath,\n                                    placeholder: \"The file path\",\n                                    type: \"text\"\n                                }\n                            },\n                            buttons: true\n                        })];\n                case 1:\n                    res = _a.sent();\n                    if (res == null)\n                        return [2 /*return*/];\n                    res = res.replace(/\\\\/g, \"/\");\n                    if (res != null && res != \"\" && !fs.existsSync(working_dir + \"/\" + res)) {\n                        fs.mkdirSync(dir + res);\n                    }\n                    rle();\n                    return [2 /*return*/, res];\n            }\n        });\n    });\n}\nfunction showRenameDialog(path) {\n    return __awaiter(this, void 0, void 0, function () {\n        var res;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    path = path.replace(/\\\\/g, \"/\").replace(dir, \"\");\n                    return [4 /*yield*/, swal({\n                            text: \"Please type in the file name\",\n                            content: {\n                                element: \"input\",\n                                attributes: {\n                                    value: path,\n                                    placeholder: path,\n                                    type: \"text\"\n                                }\n                            },\n                            buttons: true\n                        })];\n                case 1:\n                    res = _a.sent();\n                    if (res == null)\n                        return [2 /*return*/];\n                    res = res.replace(/\\\\/g, \"/\");\n                    console.log(res);\n                    fs.renameSync(dir + path, dir + res);\n                    rle();\n                    return [2 /*return*/, res];\n            }\n        });\n    });\n}\nfunction showDeleteDialog(path) {\n    return __awaiter(this, void 0, void 0, function () {\n        var res;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!fs.lstatSync(path).isFile()) return [3 /*break*/, 2];\n                    return [4 /*yield*/, swal({\n                            dangerMode: true,\n                            text: 'Do you realy want to delete file \"/' +\n                                path.replace(/\\\\/g, \"/\").replace(dir, \"\") +\n                                '\"',\n                            buttons: true\n                        })];\n                case 1:\n                    //@ts-ignore\n                    res = _a.sent();\n                    return [3 /*break*/, 4];\n                case 2:\n                    if (!fs.lstatSync(path).isDirectory()) return [3 /*break*/, 4];\n                    return [4 /*yield*/, swal({\n                            dangerMode: true,\n                            text: 'Do you realy want to delete folder \"/' +\n                                path.replace(/\\\\/g, \"/\").replace(dir, \"\") +\n                                '\"',\n                            buttons: true\n                        })];\n                case 3:\n                    //@ts-ignore\n                    res = _a.sent();\n                    _a.label = 4;\n                case 4:\n                    if (!res)\n                        return [2 /*return*/];\n                    if (fs.lstatSync(path).isDirectory())\n                        deleteFolderRecursive(path);\n                    else\n                        fs.unlinkSync(path);\n                    rle();\n                    return [2 /*return*/, res];\n            }\n        });\n    });\n}\nglobal.ExplorerAPI = ExplorerAPI;\n","import { PluginApi, Api, Plugin } from \"@mcscriptstudiocode/pluginmanager\";\r\nimport { Editor } from \"@mcscriptstudiocodeplugins/editor\";\r\nimport {\r\n  ContextMenuAPI,\r\n  ContextMenuPoint,\r\n  ContextMenu\r\n} from \"@mcscriptstudiocodeplugins/contextmenu\";\r\n\r\ndeclare class MenuActionAPI implements Api {\r\n  name: string;\r\n  version: string;\r\n  listeners: any;\r\n  on(key: string, func: Function);\r\n  trigger(key: string);\r\n}\r\n\r\ndeclare let working_dir: string;\r\ndeclare let global: any;\r\n\r\nimport * as fs from \"fs\";\r\nimport * as os from \"os\";\r\nimport * as $ from \"jquery\";\r\nimport * as swal from \"sweetalert\";\r\nlet editor: Editor;\r\nlet ctxmenuapi: ContextMenuAPI;\r\n\r\nlet dir = working_dir.replace(/\\\\/g, \"/\") + \"/\";\r\nlet rle: Function;\r\n\r\nexport default class Explorer extends Plugin {\r\n  setup() {\r\n    this.api.addElement(`<div id=\"explorer\"><h3>Project Explorer</h3></div>`);\r\n    this.api.addStylesheet(`${__dirname}/style/css/global.min.css`);\r\n    this.api.registerAPI(\"explorer\", new ExplorerAPI());\r\n  }\r\n\r\n  start() {\r\n    editor = <Editor>this.api.getAPI(\"editor\");\r\n    ctxmenuapi = this.api.getAPI(\"contextmenu\");\r\n    $(\"#explorer\").mousedown(function(event) {\r\n      if (event.which == 1) {\r\n        $(\"#explorer .active\").removeClass(\"active\");\r\n        if (\r\n          $(event.target).prop(\"nodeName\") == \"P\" ||\r\n          $(event.target).prop(\"nodeName\") == \"I\" ||\r\n          $(event.target).prop(\"nodeName\") == \"IMG\"\r\n        )\r\n          $(event.target.parentNode).addClass(\"active\");\r\n        $(event.target).addClass(\"active\");\r\n      }\r\n    });\r\n    $(\"#explorer\").mouseup(function(event) {\r\n      if (event.which == 1) $(\"#explorer .active\").removeClass(\"active\");\r\n    });\r\n    $(\"#explorer\").click(function(event) {\r\n      if (event.which == 1) {\r\n        if ($(event.target).prop(\"nodeName\") == \"LI\")\r\n          $(event.target)\r\n            .children(\"i\")\r\n            .trigger(\"click\");\r\n        if (\r\n          $(event.target).prop(\"nodeName\") == \"P\" ||\r\n          $(event.target).prop(\"nodeName\") == \"IMG\"\r\n        )\r\n          $(event.target)\r\n            .parent()\r\n            .children(\"i\")\r\n            .trigger(\"click\");\r\n      }\r\n    });\r\n    $(\"#explorer\").mouseover(function(event) {\r\n      $(\"#explorer .hover\").removeClass(\"hover\");\r\n      if (\r\n        $(event.target).prop(\"nodeName\") == \"P\" ||\r\n        $(event.target).prop(\"nodeName\") == \"I\" ||\r\n        $(event.target).prop(\"nodeName\") == \"IMG\"\r\n      )\r\n        $(event.target.parentNode).addClass(\"hover\");\r\n      $(event.target).addClass(\"hover\");\r\n    });\r\n    $(\"#explorer\").mouseleave(function(event) {\r\n      $(\"#explorer .hover\").removeClass(\"hover\");\r\n    });\r\n    $(\"#explorer\").bind(\"contextmenu\", function(e) {\r\n      let target = $(event.target);\r\n      if (\r\n        $(event.target).prop(\"nodeName\") == \"P\" ||\r\n        $(event.target).prop(\"nodeName\") == \"I\" ||\r\n        $(event.target).prop(\"nodeName\") == \"IMG\"\r\n      )\r\n        target = target.parent();\r\n\r\n      if (target.prop(\"nodeName\") != \"LI\") return;\r\n\r\n      let path = target.attr(\"path\");\r\n      if (fs.lstatSync(path).isDirectory())\r\n        ctxmenuapi.show(\r\n          new ContextMenu([\r\n            [\r\n              new ContextMenuPoint({\r\n                name: \"New File\",\r\n                click: function() {\r\n                  showCreateDialogFile(path + \"/\");\r\n                }\r\n              }),\r\n              new ContextMenuPoint({\r\n                name: \"New Folder\",\r\n                click: function() {\r\n                  showCreateDialogFolder(path + \"/\");\r\n                }\r\n              })\r\n            ],\r\n            [\r\n              new ContextMenuPoint({\r\n                name: \"Rename\",\r\n                click: function() {\r\n                  showRenameDialog(path);\r\n                }\r\n              }),\r\n              new ContextMenuPoint({\r\n                name: \"Delete\",\r\n                click: function() {\r\n                  showDeleteDialog(path);\r\n                }\r\n              })\r\n            ]\r\n          ])\r\n        );\r\n      if (fs.lstatSync(path).isFile())\r\n        ctxmenuapi.show(\r\n          new ContextMenu([\r\n            [\r\n              new ContextMenuPoint({\r\n                name: \"Rename\",\r\n                click: function() {\r\n                  showRenameDialog(path);\r\n                }\r\n              }),\r\n              new ContextMenuPoint({\r\n                name: \"Delete\",\r\n                click: function() {\r\n                  showDeleteDialog(path);\r\n                }\r\n              })\r\n            ]\r\n          ])\r\n        );\r\n      e.preventDefault();\r\n    });\r\n\r\n    let menuactionapi: MenuActionAPI = this.api.getAPI(\"menu_action\");\r\n    menuactionapi.on(\"file.new\", function() {\r\n      showCreateDialogFile();\r\n    });\r\n    menuactionapi.on(\"file.new_folder\", function() {\r\n      showCreateDialogFolder();\r\n    });\r\n    startExplorer(this.api);\r\n  }\r\n\r\n  stop() {}\r\n\r\n  reload() {}\r\n}\r\n\r\nfunction startExplorer(api: PluginApi) {\r\n  let explorer_openedfolders = [\"/\"];\r\n  fs.watchFile(working_dir, {}, reloadExplorer);\r\n  reloadExplorer();\r\n\r\n  async function reloadExplorer() {\r\n    let dir = working_dir;\r\n    let files = listFiles(dir);\r\n    for (let i in api.getAPI(\"explorer\").orl)\r\n      files = api.getAPI(\"explorer\").orl[i](files);\r\n\r\n    function generateHTMLTree(key, files) {\r\n      function getIcon(file) {\r\n        let ending = file.split(\".\")[file.split(\".\").length - 1];\r\n        switch (ending) {\r\n          case \"mcscript\":\r\n            return `${__dirname}/assets/icons/mcscript.png`;\r\n          case \"mcfunction\":\r\n            return `${__dirname}/assets/icons/mcfunction.png`;\r\n          case \"mcmeta\":\r\n            return `${__dirname}/assets/icons/mcmeta.png`;\r\n          default:\r\n            return `${__dirname}/assets/icons/unknown.png`;\r\n        }\r\n      }\r\n      let name = key;\r\n      if (name.endsWith(\"/\")) name = name.replace(/\\/$/, \"\");\r\n      name = filename(name);\r\n\r\n      if (files instanceof Object) {\r\n        var ret = `<li class=\"dir\" path=\"${key}\"><i class=\"material-icons\">keyboard_arrow_right</i><img src=\"${__dirname}/assets/icons/folder.png\" /><p>${name}</p><ul style=\"display: none\">`;\r\n        for (let k in files) {\r\n          ret += generateHTMLTree(`${key}/${k}`, files[k]);\r\n        }\r\n        ret += `</ul></li>`;\r\n        return ret;\r\n      } else {\r\n        return `<li class=\"file\" path=\"${files}\"><img src=\"${getIcon(\r\n          files\r\n        )}\" /><p>${name}</p></li>`;\r\n      }\r\n    }\r\n    $(\"#explorerlist\").remove();\r\n    $(\"#explorer\").append(\r\n      `<ul id=\"explorerlist\">${generateHTMLTree(dir, files)}</p>`\r\n    );\r\n\r\n    $(\"#explorer ul li i\").click(function() {\r\n      var path = $(this)\r\n        .parent()\r\n        .attr(\"path\");\r\n      if ($(this).text() == \"keyboard_arrow_down\") {\r\n        $(this)\r\n          .parent()\r\n          .children(\"ul\")\r\n          .hide();\r\n        $(this).text(\"keyboard_arrow_right\");\r\n        delete explorer_openedfolders[explorer_openedfolders.indexOf(path)];\r\n      } else {\r\n        $(this)\r\n          .parent()\r\n          .children(\"ul\")\r\n          .show();\r\n        $(this).text(\"keyboard_arrow_down\");\r\n        explorer_openedfolders.push(path);\r\n      }\r\n    });\r\n\r\n    $(\"#explorer .file\").click(function() {\r\n      let path = $(this).attr(\"path\");\r\n      editor.open(path);\r\n    });\r\n\r\n    $(\"#explorer ul li.dir\").each(function() {\r\n      if (explorer_openedfolders.includes($(this).attr(\"path\"))) {\r\n        $(this)\r\n          .children(\"ul\")\r\n          .show();\r\n        $(this)\r\n          .children(\"i\")\r\n          .text(\"keyboard_arrow_down\");\r\n      }\r\n    });\r\n  }\r\n  rle = reloadExplorer;\r\n}\r\n\r\nclass ExplorerAPI {\r\n  orl: Function[] = [];\r\n  onReload(func: Function) {\r\n    this.orl.push(func);\r\n  }\r\n}\r\n\r\nfunction listFiles(directory: string): any {\r\n  if (fs.lstatSync(directory).isDirectory()) {\r\n    let ret: Object = {};\r\n    let files = fs.readdirSync(directory);\r\n\r\n    for (var i = 0; i < files.length; i++) {\r\n      if (fs.lstatSync(`${directory}/${files[i]}`).isDirectory())\r\n        ret[files[i]] = listFiles(`${directory}/${files[i]}`);\r\n    }\r\n    for (var i = 0; i < files.length; i++) {\r\n      if (fs.lstatSync(`${directory}/${files[i]}`).isFile())\r\n        ret[files[i]] = listFiles(`${directory}/${files[i]}`);\r\n    }\r\n\r\n    return ret;\r\n  } else return directory;\r\n}\r\n\r\nfunction filename(path: string): string {\r\n  return path.match(/[^\\\\/]*$/)[0];\r\n}\r\n\r\nasync function showCreateDialogFile(standartpath = \"\"): Promise<string> {\r\n  standartpath = standartpath.replace(/\\\\/g, \"/\").replace(dir, \"\");\r\n  //@ts-ignore\r\n  let res = await swal({\r\n    text: \"Type in the file you want to create\",\r\n    content: {\r\n      element: \"input\",\r\n      attributes: {\r\n        value: standartpath,\r\n        placeholder: \"The file path\",\r\n        type: \"text\"\r\n      }\r\n    },\r\n    buttons: true\r\n  });\r\n  if (res == null) return;\r\n  res = res.replace(/\\\\/g, \"/\");\r\n\r\n  if (res != null && res != \"\" && !fs.existsSync(dir + res)) {\r\n    //res.substring(res.lastIndexOf(\"/scripts/\")+7,res.length)\r\n    if (res.endsWith(\".mcscript\"))\r\n      fs.writeFileSync(\r\n        dir + res,\r\n        `#file: ./unknown\\n\\n/**\\n * @author ${\r\n          os.userInfo().username\r\n        }\\n * @project unknown\\n * @since 0.0.1\\n * @version 0.0.1\\n *\\n */\\n\\n\\n`,\r\n        \"utf-8\"\r\n      );\r\n    else if (res.endsWith(\"pack.mcmeta\"))\r\n      fs.writeFileSync(\r\n        dir + res,\r\n        `{\\n  \"pack\": {\\n    \"pack_format\": 1,\\n    \"description\": \"Pack generated by mcscriptStudioCode\"\\n  }\\n}`,\r\n        \"utf-8\"\r\n      );\r\n    else fs.writeFileSync(dir + res, \"\", \"utf-8\");\r\n  }\r\n  rle();\r\n  return res;\r\n}\r\n\r\nfunction deleteFolderRecursive(path: fs.PathLike) {\r\n  if (fs.existsSync(path)) {\r\n    fs.readdirSync(path).forEach(function(file) {\r\n      var curPath = path + \"/\" + file;\r\n      if (fs.lstatSync(curPath).isDirectory()) {\r\n        // recurse\r\n        deleteFolderRecursive(curPath);\r\n      } else {\r\n        // delete file\r\n        fs.unlinkSync(curPath);\r\n      }\r\n    });\r\n    fs.rmdirSync(path);\r\n  }\r\n}\r\n\r\nasync function showCreateDialogFolder(standartpath = \"\"): Promise<string> {\r\n  standartpath = standartpath.replace(/\\\\/g, \"/\").replace(dir, \"\");\r\n  //@ts-ignore\r\n  let res = await swal({\r\n    text: \"Type in the folder you want to create\",\r\n    content: {\r\n      element: \"input\",\r\n      attributes: {\r\n        value: standartpath,\r\n        placeholder: \"The file path\",\r\n        type: \"text\"\r\n      }\r\n    },\r\n    buttons: true\r\n  });\r\n  if (res == null) return;\r\n  res = res.replace(/\\\\/g, \"/\");\r\n\r\n  if (res != null && res != \"\" && !fs.existsSync(working_dir + \"/\" + res)) {\r\n    fs.mkdirSync(dir + res);\r\n  }\r\n  rle();\r\n  return res;\r\n}\r\n\r\nasync function showRenameDialog(path): Promise<string> {\r\n  path = path.replace(/\\\\/g, \"/\").replace(dir, \"\");\r\n  //@ts-ignore\r\n  let res = await swal({\r\n    text: \"Please type in the file name\",\r\n    content: {\r\n      element: \"input\",\r\n      attributes: {\r\n        value: path,\r\n        placeholder: path,\r\n        type: \"text\"\r\n      }\r\n    },\r\n    buttons: true\r\n  });\r\n  if (res == null) return;\r\n  res = res.replace(/\\\\/g, \"/\");\r\n\r\n  console.log(res);\r\n  fs.renameSync(dir + path, dir + res);\r\n  rle();\r\n  return res;\r\n}\r\n\r\nasync function showDeleteDialog(path): Promise<string> {\r\n  let res;\r\n  if (fs.lstatSync(path).isFile())\r\n    //@ts-ignore\r\n    res = await swal({\r\n      dangerMode: true,\r\n      text:\r\n        'Do you realy want to delete file \"/' +\r\n        path.replace(/\\\\/g, \"/\").replace(dir, \"\") +\r\n        '\"',\r\n      buttons: true\r\n    });\r\n  else if (fs.lstatSync(path).isDirectory())\r\n    //@ts-ignore\r\n    res = await swal({\r\n      dangerMode: true,\r\n      text:\r\n        'Do you realy want to delete folder \"/' +\r\n        path.replace(/\\\\/g, \"/\").replace(dir, \"\") +\r\n        '\"',\r\n      buttons: true\r\n    });\r\n  if (!res) return;\r\n  if (fs.lstatSync(path).isDirectory()) deleteFolderRecursive(path);\r\n  else fs.unlinkSync(path);\r\n  rle();\r\n  return res;\r\n}\r\n\r\nglobal.ExplorerAPI = ExplorerAPI;\r\n"]}