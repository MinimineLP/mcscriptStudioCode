"use strict";var __extends=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};return function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}();exports.__esModule=!0;var Stream=require("stream"),Util=require("util"),DivConsole=function(){function t(){this.outStream=new DivConsoleOutStream(this),this.debugStream=new DivConsoleDebugStream(this),this.errorStream=new DivConsoleErrorStream(this),this.exceptionStream=new DivConsoleExceptionStream(this),this.contentList=new ConsoleContentList}return t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.contentList.push(new ConsoleLogContent(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.contentList.push(new ConsoleErrorContent(t))},t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.contentList.push(new ConsoleDebugContent(t))},t.prototype.exception=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.contentList.push(new ConsoleExceptionContent(t))},t.prototype.pipe=function(t){this.contentList.pipe(t)},t.prototype.clear=function(){this.contentList.clear()},t}();exports.DivConsole=DivConsole;var ConsoleContent=function(){function t(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];this.type=t,this.content=e}return t.prototype.getString=function(){return this.content.toString()},t.prototype.getHTML=function(){return this.content.toString()},t.prototype.getPrefix=function(){return"Console/"+this.type.toUpperCase()},t}(),ConsoleLogContent=function(o){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.call(this,"log",t)||this}return __extends(t,o),t.prototype.getPrefix=function(){return"Console/LOGGING"},t}(exports.ConsoleContent=ConsoleContent);exports.ConsoleLogContent=ConsoleLogContent;var ConsoleErrorContent=function(o){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.call(this,"error",t)||this}return __extends(t,o),t.prototype.getPrefix=function(){return"Console/ERROR"},t}(ConsoleContent);exports.ConsoleErrorContent=ConsoleErrorContent;var ConsoleExceptionContent=function(o){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.call(this,"exception",t)||this}return __extends(t,o),t.prototype.getPrefix=function(){return"Console/EXCEPTION"},t}(ConsoleContent);exports.ConsoleExceptionContent=ConsoleExceptionContent;var ConsoleDebugContent=function(o){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.call(this,"debug",t)||this}return __extends(t,o),t.prototype.getPrefix=function(){return"Console/DEBUGGING"},t}(ConsoleContent);exports.ConsoleDebugContent=ConsoleDebugContent;var ConsoleContentList=function(){function t(t){void 0===t&&(t="%msg%"),this.content=[],this.size=1e3,this.pipes=[],this.renderformat=t}return t.prototype.push=function(t){this.size<this.content.length?this.content.splice(0,this.content.length-this.size,t):this.content.splice(0,0,t),this.pipeToPipes(t)},t.prototype.parseRenderMessageHTML=function(t,e){return t.replace(/%msg%/g,e.getHTML()).replace(/%pre%/g,e.getPrefix())},t.prototype.parseRenderMessageString=function(t,e){return t.replace(/%msg%/g,e.getString()).replace(/%pre%/g,e.getPrefix())},t.prototype.renderHTML=function(t,e){void 0===t&&(t=this.size),void 0===e&&(e=this.renderformat),0==t&&(t=this.size);var o="";t>=this.content.length&&(t=this.content.length-1);for(var n=t;0<=n;n--)o+=this.parseRenderMessageHTML(e,this.content[n])+"\n";return o.replace(/\n/g,"\n<br/>")},t.prototype.renderString=function(t,e){void 0===t&&(t=this.size),void 0===e&&(e=this.renderformat),0==t&&(t=this.size);var o="";t>=this.content.length&&(t=this.content.length-1);for(var n=t;0<=n;n--)o+=this.parseRenderMessageString(e,this.content[n]);return o},t.prototype.pipe=function(t){t instanceof HTMLElement&&(t.innerHTML=this.renderHTML()),this.pipes.push(t)},t.prototype.pipeToPipes=function(e){var o=this;this.pipes.forEach(function(t){t instanceof HTMLElement?(t.innerHTML=o.renderHTML(),t.scrollTop=t.scrollHeight):t instanceof Function?t(e.getString()):t instanceof Stream.Writable&&t._write(e.getString(),"utf8",function(t){t&&console.error(t)})})},t.prototype.clear=function(){this.content=[]},t}();function DivConsoleOutStream(t){Stream.Writable.call(this),this.console=t}function DivConsoleErrorStream(t){Stream.Writable.call(this),this.console=t}function DivConsoleExceptionStream(t){Stream.Writable.call(this),this.console=t}function DivConsoleDebugStream(t){Stream.Writable.call(this),this.console=t}exports.ConsoleContentList=ConsoleContentList,exports.DivConsoleOutStream=DivConsoleOutStream,Util.inherits(DivConsoleOutStream,Stream.Writable),DivConsoleOutStream.prototype._write=function(t,e,o){this.console.log(t.toString()),o()},exports.DivConsoleErrorStream=DivConsoleErrorStream,Util.inherits(DivConsoleErrorStream,Stream.Writable),DivConsoleErrorStream.prototype._write=function(t,e,o){this.console.error(t.toString()),o()},exports.DivConsoleExceptionStream=DivConsoleExceptionStream,Util.inherits(DivConsoleErrorStream,Stream.Writable),DivConsoleErrorStream.prototype._write=function(t,e,o){this.console.exception(t.toString()),o()},exports.DivConsoleDebugStream=DivConsoleDebugStream,Util.inherits(DivConsoleErrorStream,Stream.Writable),DivConsoleErrorStream.prototype._write=function(t,e,o){this.console.debug(t.toString()),o()};
//# sourceMappingURL=DivConsole.js.map
